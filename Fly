-- Scripts Hub UI for Roblox
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Kiểm tra nếu GUI đã tồn tại thì xóa
if playerGui:FindFirstChild("ScriptsHubGui") then
    playerGui.ScriptsHubGui:Destroy()
end

-- Tạo ScreenGui chính
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ScriptsHubGui"
screenGui.Parent = playerGui
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Frame chính
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 400, 0, 350)
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -175)
mainFrame.BackgroundColor3 = Color3.fromRGB(70, 130, 180)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Bo góc cho frame chính
local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainFrame

-- Header
local header = Instance.new("Frame")
header.Name = "Header"
header.Size = UDim2.new(1, 0, 0, 50)
header.Position = UDim2.new(0, 0, 0, 0)
header.BackgroundColor3 = Color3.fromRGB(60, 110, 160)
header.BorderSizePixel = 0
header.Parent = mainFrame

local headerCorner = Instance.new("UICorner")
headerCorner.CornerRadius = UDim.new(0, 12)
headerCorner.Parent = header

-- Title
local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "Title"
titleLabel.Size = UDim2.new(1, -50, 1, 0)
titleLabel.Position = UDim2.new(0, 15, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Scripts Hub"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.GothamBold
titleLabel.Parent = header

-- Close Button
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -40, 0, 10)
closeButton.BackgroundTransparency = 1
closeButton.Text = "✕"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.TextScaled = true
closeButton.Font = Enum.Font.GothamBold
closeButton.Parent = header

-- Content Frame
local contentFrame = Instance.new("Frame")
contentFrame.Name = "Content"
contentFrame.Size = UDim2.new(1, -20, 1, -70)
contentFrame.Position = UDim2.new(0, 10, 0, 60)
contentFrame.BackgroundColor3 = Color3.fromRGB(50, 60, 80)
contentFrame.BorderSizePixel = 0
contentFrame.Parent = mainFrame

local contentCorner = Instance.new("UICorner")
contentCorner.CornerRadius = UDim.new(0, 8)
contentCorner.Parent = contentFrame

-- Free Script Section
local freeScriptLabel = Instance.new("TextLabel")
freeScriptLabel.Name = "FreeScriptLabel"
freeScriptLabel.Size = UDim2.new(1, 0, 0, 30)
freeScriptLabel.Position = UDim2.new(0, 0, 0, 10)
freeScriptLabel.BackgroundTransparency = 1
freeScriptLabel.Text = "Free Script"
freeScriptLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
freeScriptLabel.TextScaled = true
freeScriptLabel.Font = Enum.Font.Gotham
freeScriptLabel.Parent = contentFrame

-- Execute Button
local executeButton = Instance.new("TextButton")
executeButton.Name = "ExecuteButton"
executeButton.Size = UDim2.new(0, 120, 0, 35)
executeButton.Position = UDim2.new(0, 20, 0, 50)
executeButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
executeButton.BorderSizePixel = 0
executeButton.Text = "Execute"
executeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
executeButton.TextScaled = true
executeButton.Font = Enum.Font.GothamBold
executeButton.Parent = contentFrame

local executeCorner = Instance.new("UICorner")
executeCorner.CornerRadius = UDim.new(0, 8)
executeCorner.Parent = executeButton

-- Separator Line
local separatorLine = Instance.new("Frame")
separatorLine.Name = "Separator"
separatorLine.Size = UDim2.new(1, -20, 0, 2)
separatorLine.Position = UDim2.new(0, 10, 0, 100)
separatorLine.BackgroundColor3 = Color3.fromRGB(80, 90, 110)
separatorLine.BorderSizePixel = 0
separatorLine.Parent = contentFrame

-- Key Script Section
local keyScriptLabel = Instance.new("TextLabel")
keyScriptLabel.Name = "KeyScriptLabel"
keyScriptLabel.Size = UDim2.new(1, 0, 0, 30)
keyScriptLabel.Position = UDim2.new(0, 0, 0, 115)
keyScriptLabel.BackgroundTransparency = 1
keyScriptLabel.Text = "Key Script"
keyScriptLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
keyScriptLabel.TextScaled = true
keyScriptLabel.Font = Enum.Font.Gotham
keyScriptLabel.Parent = contentFrame

-- Key Input TextBox
local keyInput = Instance.new("TextBox")
keyInput.Name = "KeyInput"
keyInput.Size = UDim2.new(1, -40, 0, 35)
keyInput.Position = UDim2.new(0, 20, 0, 150)
keyInput.BackgroundColor3 = Color3.fromRGB(70, 80, 100)
keyInput.BorderSizePixel = 0
keyInput.Text = ""
keyInput.PlaceholderText = "Enter Your Key Here..."
keyInput.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
keyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
keyInput.TextScaled = true
keyInput.Font = Enum.Font.Gotham
keyInput.Parent = contentFrame

local keyInputCorner = Instance.new("UICorner")
keyInputCorner.CornerRadius = UDim.new(0, 8)
keyInputCorner.Parent = keyInput

-- Submit Key Button
local submitButton = Instance.new("TextButton")
submitButton.Name = "SubmitButton"
submitButton.Size = UDim2.new(0, 150, 0, 35)
submitButton.Position = UDim2.new(0.5, -75, 0, 195)
submitButton.BackgroundColor3 = Color3.fromRGB(33, 150, 243)
submitButton.BorderSizePixel = 0
submitButton.Text = "Submit Key"
submitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
submitButton.TextScaled = true
submitButton.Font = Enum.Font.GothamBold
submitButton.Parent = contentFrame

local submitCorner = Instance.new("UICorner")
submitCorner.CornerRadius = UDim.new(0, 8)
submitCorner.Parent = submitButton

-- Get Key Button
local getKeyButton = Instance.new("TextButton")
getKeyButton.Name = "GetKeyButton"
getKeyButton.Size = UDim2.new(0, 80, 0, 30)
getKeyButton.Position = UDim2.new(0, 20, 0, 240)
getKeyButton.BackgroundColor3 = Color3.fromRGB(60, 70, 90)
getKeyButton.BorderSizePixel = 0
getKeyButton.Text = "Get Key"
getKeyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
getKeyButton.TextScaled = true
getKeyButton.Font = Enum.Font.Gotham
getKeyButton.Parent = contentFrame

local getKeyCorner = Instance.new("UICorner")
getKeyCorner.CornerRadius = UDim.new(0, 6)
getKeyCorner.Parent = getKeyButton

-- Help Button (?)
local helpButton = Instance.new("TextButton")
helpButton.Name = "HelpButton"
helpButton.Size = UDim2.new(0, 30, 0, 30)
helpButton.Position = UDim2.new(0, 110, 0, 240)
helpButton.BackgroundColor3 = Color3.fromRGB(60, 70, 90)
helpButton.BorderSizePixel = 0
helpButton.Text = "?"
helpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
helpButton.TextScaled = true
helpButton.Font = Enum.Font.GothamBold
helpButton.Parent = contentFrame

local helpCorner = Instance.new("UICorner")
helpCorner.CornerRadius = UDim.new(0, 6)
helpCorner.Parent = helpButton

-- Status Label
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Size = UDim2.new(0, 120, 0, 30)
statusLabel.Position = UDim2.new(1, -140, 0, 240)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Status: Not Active"
statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
statusLabel.TextScaled = true
statusLabel.Font = Enum.Font.Gotham
statusLabel.Parent = contentFrame

-- Status Indicator (Red Dot)
local statusDot = Instance.new("Frame")
statusDot.Name = "StatusDot"
statusDot.Size = UDim2.new(0, 8, 0, 8)
statusDot.Position = UDim2.new(1, -15, 0.5, -4)
statusDot.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
statusDot.BorderSizePixel = 0
statusDot.Parent = statusLabel

local dotCorner = Instance.new("UICorner")
dotCorner.CornerRadius = UDim.new(1, 0)
dotCorner.Parent = statusDot

-- Functions
local function createTween(object, info, properties)
    local tween = TweenService:Create(object, info, properties)
    tween:Play()
    return tween
end

local function showNotification(message, color)
    local notif = Instance.new("Frame")
    notif.Size = UDim2.new(0, 300, 0, 50)
    notif.Position = UDim2.new(0.5, -150, 0, -60)
    notif.BackgroundColor3 = color or Color3.fromRGB(76, 175, 80)
    notif.Parent = screenGui
    
    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 8)
    notifCorner.Parent = notif
    
    local notifText = Instance.new("TextLabel")
    notifText.Size = UDim2.new(1, -10, 1, 0)
    notifText.Position = UDim2.new(0, 5, 0, 0)
    notifText.BackgroundTransparency = 1
    notifText.Text = message
    notifText.TextColor3 = Color3.fromRGB(255, 255, 255)
    notifText.TextScaled = true
    notifText.Font = Enum.Font.Gotham
    notifText.Parent = notif
    
    -- Animate notification
    createTween(notif, TweenInfo.new(0.3), {Position = UDim2.new(0.5, -150, 0, 20)})
    
    wait(3)
    createTween(notif, TweenInfo.new(0.3), {Position = UDim2.new(0.5, -150, 0, -60)})
    wait(0.3)
    notif:Destroy()
end

-- Button Events
executeButton.MouseButton1Click:Connect(function()
    createTween(executeButton, TweenInfo.new(0.1), {Size = UDim2.new(0, 115, 0, 32)})
    wait(0.1)
    createTween(executeButton, TweenInfo.new(0.1), {Size = UDim2.new(0, 120, 0, 35)})
    
    -- Chạy Free Script
    local success, error = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Sddnin4/Mila/refs/heads/main/Hub"))()
    end)
    
    if success then
        showNotification("Free Script Executed Successfully!", Color3.fromRGB(76, 175, 80))
    else
        showNotification("Failed to execute Free Script!", Color3.fromRGB(244, 67, 54))
    end
end)

submitButton.MouseButton1Click:Connect(function()
    createTween(submitButton, TweenInfo.new(0.1), {Size = UDim2.new(0, 145, 0, 32)})
    wait(0.1)
    createTween(submitButton, TweenInfo.new(0.1), {Size = UDim2.new(0, 150, 0, 35)})
    
    local inputKey = keyInput.Text
    local correctKey = "Hjk8dl"
    
    if inputKey == correctKey then
        -- Key đúng - cập nhật status và chạy script
        statusLabel.Text = "Status: Active"
        statusLabel.TextColor3 = Color3.fromRGB(76, 175, 80)
        statusDot.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
        
        showNotification("Key Accepted! Loading...", Color3.fromRGB(76, 175, 80))
        
        -- Chạy UI Loading Script
        local success, error = pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Sddnin4/Mila/refs/heads/main/Ui%20Loading"))()
        end)
        
        if success then
            wait(1)
            screenGui:Destroy() -- Đóng Scripts Hub sau khi load thành công
        else
            showNotification("Failed to load UI!", Color3.fromRGB(244, 67, 54))
        end
    else
        -- Key sai
        showNotification("Invalid Key! Please try again.", Color3.fromRGB(244, 67, 54))
        keyInput.Text = ""
    end
end)

getKeyButton.MouseButton1Click:Connect(function()
    createTween(getKeyButton, TweenInfo.new(0.1), {Size = UDim2.new(0, 77, 0, 28)})
    wait(0.1)
    createTween(getKeyButton, TweenInfo.new(0.1), {Size = UDim2.new(0, 80, 0, 30)})
    
    -- Copy link vào clipboard (nếu có thể) hoặc hiển thị thông báo
    local linkToCopy = "https://funlink.io/PaKX-wc"
    
    showNotification("Get Key Link: " .. linkToCopy, Color3.fromRGB(33, 150, 243))
    
    -- Nếu có thể copy vào clipboard
    if setclipboard then
        setclipboard(linkToCopy)
        showNotification("Link copied to clipboard!", Color3.fromRGB(76, 175, 80))
    end
end)

helpButton.MouseButton1Click:Connect(function()
    createTween(helpButton, TweenInfo.new(0.1), {Size = UDim2.new(0, 28, 0, 28)})
    wait(0.1)
    createTween(helpButton, TweenInfo.new(0.1), {Size = UDim2.new(0, 30, 0, 30)})
    
    showNotification("Click 'Get Key' to get the access key!", Color3.fromRGB(255, 193, 7))
end)

closeButton.MouseButton1Click:Connect(function()
    createTween(mainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 0, 0, 0), Position = UDim2.new(0.5, 0, 0.5, 0)})
    wait(0.3)
    screenGui:Destroy()
end)

-- Drag functionality
local dragging = false
local dragStart = nil
local startPos = nil

header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Entrance animation
mainFrame.Size = UDim2.new(0, 0, 0, 0)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
createTween(mainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {
    Size = UDim2.new(0, 400, 0, 350),
    Position = UDim2.new(0.5, -200, 0.5, -175)
})