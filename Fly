-- Roblox Loading UI Script
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Tạo ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "LoadingUI"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = playerGui

-- Tạo Frame chính (background)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(1, 0, 1, 0)
mainFrame.Position = UDim2.new(0, 0, 0, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Tạo container cho loading bar
local loadingContainer = Instance.new("Frame")
loadingContainer.Name = "LoadingContainer"
loadingContainer.Size = UDim2.new(0, 400, 0, 30)
loadingContainer.Position = UDim2.new(0.5, -200, 0.5, -15)
loadingContainer.BackgroundColor3 = Color3.fromRGB(45, 45, 50)
loadingContainer.BorderSizePixel = 0
loadingContainer.Parent = mainFrame

-- Tạo UICorner cho container
local containerCorner = Instance.new("UICorner")
containerCorner.CornerRadius = UDim.new(0, 15)
containerCorner.Parent = loadingContainer

-- Tạo thanh loading (progress bar)
local progressBar = Instance.new("Frame")
progressBar.Name = "ProgressBar"
progressBar.Size = UDim2.new(0, 0, 1, 0)
progressBar.Position = UDim2.new(0, 0, 0, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(0, 162, 255)
progressBar.BorderSizePixel = 0
progressBar.Parent = loadingContainer

-- Tạo UICorner cho progress bar
local progressCorner = Instance.new("UICorner")
progressCorner.CornerRadius = UDim.new(0, 15)
progressCorner.Parent = progressBar

-- Tạo UIGradient cho hiệu ứng gradient
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0.0, Color3.fromRGB(0, 162, 255)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(100, 200, 255)),
    ColorSequenceKeypoint.new(1.0, Color3.fromRGB(0, 162, 255))
}
gradient.Rotation = 45
gradient.Parent = progressBar

-- Tạo hiệu ứng shine
local shineFrame = Instance.new("Frame")
shineFrame.Name = "Shine"
shineFrame.Size = UDim2.new(0, 60, 1, 0)
shineFrame.Position = UDim2.new(0, -60, 0, 0)
shineFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
shineFrame.BackgroundTransparency = 0.7
shineFrame.BorderSizePixel = 0
shineFrame.Parent = progressBar

local shineCorner = Instance.new("UICorner")
shineCorner.CornerRadius = UDim.new(0, 15)
shineCorner.Parent = shineFrame

local shineGradient = Instance.new("UIGradient")
shineGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0.0, Color3.fromRGB(255, 255, 255)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 255, 255)),
    ColorSequenceKeypoint.new(1.0, Color3.fromRGB(255, 255, 255))
}
shineGradient.Transparency = NumberSequence.new{
    NumberSequenceKeypoint.new(0.0, 1),
    NumberSequenceKeypoint.new(0.5, 0.3),
    NumberSequenceKeypoint.new(1.0, 1)
}
shineGradient.Rotation = 90
shineGradient.Parent = shineFrame

-- Tạo loading text
local loadingText = Instance.new("TextLabel")
loadingText.Name = "LoadingText"
loadingText.Size = UDim2.new(0, 400, 0, 50)
loadingText.Position = UDim2.new(0.5, -200, 0.5, 50)
loadingText.BackgroundTransparency = 1
loadingText.Text = "Loading..."
loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
loadingText.TextScaled = true
loadingText.Font = Enum.Font.GothamBold
loadingText.Parent = mainFrame

-- Tạo percentage text
local percentText = Instance.new("TextLabel")
percentText.Name = "PercentText"
percentText.Size = UDim2.new(0, 100, 0, 25)
percentText.Position = UDim2.new(0.5, -50, 0.5, -50)
percentText.BackgroundTransparency = 1
percentText.Text = "0%"
percentText.TextColor3 = Color3.fromRGB(255, 255, 255)
percentText.TextScaled = true
percentText.Font = Enum.Font.Gotham
percentText.Parent = mainFrame

-- Hàm animate loading
local function animateLoading()
    local totalTime = 3 -- Thời gian loading (giây)
    local steps = 100
    local timePerStep = totalTime / steps
    
    for i = 1, steps do
        local progress = i / steps
        
        -- Update progress bar
        local progressTween = TweenService:Create(
            progressBar,
            TweenInfo.new(timePerStep, Enum.EasingStyle.Linear),
            {Size = UDim2.new(progress, 0, 1, 0)}
        )
        progressTween:Play()
        
        -- Update percentage text
        percentText.Text = math.floor(progress * 100) .. "%"
        
        -- Animate shine effect
        if progress > 0.1 then
            local shineTween = TweenService:Create(
                shineFrame,
                TweenInfo.new(0.5, Enum.EasingStyle.Linear),
                {Position = UDim2.new(progress - 0.15, 0, 0, 0)}
            )
            shineTween:Play()
        end
        
        wait(timePerStep)
    end
    
    -- Sau khi loading xong
    wait(0.5)
    
    -- Fade out loading UI
    local fadeOutTween = TweenService:Create(
        mainFrame,
        TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut),
        {BackgroundTransparency = 1}
    )
    
    local fadeOutContainer = TweenService:Create(
        loadingContainer,
        TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut),
        {BackgroundTransparency = 1}
    )
    
    local fadeOutProgress = TweenService:Create(
        progressBar,
        TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut),
        {BackgroundTransparency = 1}
    )
    
    local fadeOutText = TweenService:Create(
        loadingText,
        TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut),
        {TextTransparency = 1}
    )
    
    local fadeOutPercent = TweenService:Create(
        percentText,
        TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut),
        {TextTransparency = 1}
    )
    
    fadeOutTween:Play()
    fadeOutContainer:Play()
    fadeOutProgress:Play()
    fadeOutText:Play()
    fadeOutPercent:Play()
    
    -- Chờ fade out hoàn thành
    fadeOutTween.Completed:Connect(function()
        -- Xóa UI
        screenGui:Destroy()
        
        -- Chạy script chính
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Sddnin4/Mila/refs/heads/main/V2.txt"))()
    end)
end

-- Bắt đầu animation loading
spawn(animateLoading)