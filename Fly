-- Roblox UI Script
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Tạo ScreenGui chính
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MainUI"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false

-- Tạo khung chính với viền đỏ
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Parent = screenGui
mainFrame.BackgroundColor3 = Color3.fromRGB(240, 240, 240)
mainFrame.BorderSizePixel = 0
mainFrame.Position = UDim2.new(0.5, -400, 0.5, -250)
mainFrame.Size = UDim2.new(0, 800, 0, 500)

-- Tạo viền đỏ
local border = Instance.new("UIStroke")
border.Parent = mainFrame
border.Color = Color3.fromRGB(220, 70, 70)
border.Thickness = 4

-- Tạo corner rounded
local corner = Instance.new("UICorner")
corner.Parent = mainFrame
corner.CornerRadius = UDim.new(0, 12)

-- Tạo header với logo
local headerFrame = Instance.new("Frame")
headerFrame.Name = "Header"
headerFrame.Parent = mainFrame
headerFrame.BackgroundColor3 = Color3.fromRGB(220, 70, 70)
headerFrame.BorderSizePixel = 0
headerFrame.Size = UDim2.new(1, 0, 0, 50)

local headerCorner = Instance.new("UICorner")
headerCorner.Parent = headerFrame
headerCorner.CornerRadius = UDim.new(0, 12)

-- Logo/Icon
local logoFrame = Instance.new("Frame")
logoFrame.Name = "Logo"
logoFrame.Parent = headerFrame
logoFrame.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
logoFrame.Position = UDim2.new(0, 10, 0.5, -15)
logoFrame.Size = UDim2.new(0, 30, 0, 30)

local logoCorner = Instance.new("UICorner")
logoCorner.Parent = logoFrame
logoCorner.CornerRadius = UDim.new(0, 6)

local logoText = Instance.new("TextLabel")
logoText.Parent = logoFrame
logoText.BackgroundTransparency = 1
logoText.Size = UDim2.new(1, 0, 1, 0)
logoText.Font = Enum.Font.GothamBold
logoText.Text = "R"
logoText.TextColor3 = Color3.fromRGB(255, 255, 255)
logoText.TextScaled = true

-- Buttons ở góc phải header
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Parent = headerFrame
closeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
closeButton.Position = UDim2.new(1, -35, 0.5, -10)
closeButton.Size = UDim2.new(0, 20, 0, 20)
closeButton.Font = Enum.Font.Gotham
closeButton.Text = "×"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.TextScaled = true
closeButton.BorderSizePixel = 0

local closeCorner = Instance.new("UICorner")
closeCorner.Parent = closeButton
closeCorner.CornerRadius = UDim.new(0, 4)

local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Parent = headerFrame
minimizeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
minimizeButton.Position = UDim2.new(1, -60, 0.5, -10)
minimizeButton.Size = UDim2.new(0, 20, 0, 20)
minimizeButton.Font = Enum.Font.Gotham
minimizeButton.Text = "−"
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.TextScaled = true
minimizeButton.BorderSizePixel = 0

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.Parent = minimizeButton
minimizeCorner.CornerRadius = UDim.new(0, 4)

-- Navigation Frame
local navFrame = Instance.new("Frame")
navFrame.Name = "Navigation"
navFrame.Parent = mainFrame
navFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
navFrame.BorderSizePixel = 0
navFrame.Position = UDim2.new(0, 0, 0, 50)
navFrame.Size = UDim2.new(1, 0, 0, 40)

-- Tạo các tab buttons
local tabs = {"Home", "Script", "Notifications", "Other"}
local tabButtons = {}

for i, tabName in ipairs(tabs) do
    local tabButton = Instance.new("TextButton")
    tabButton.Name = tabName .. "Tab"
    tabButton.Parent = navFrame
    tabButton.BackgroundTransparency = 1
    tabButton.Position = UDim2.new((i-1) * 0.2 + 0.05, 0, 0, 0)
    tabButton.Size = UDim2.new(0.15, 0, 1, 0)
    tabButton.Font = Enum.Font.Gotham
    tabButton.Text = tabName
    tabButton.TextColor3 = Color3.fromRGB(100, 100, 100)
    tabButton.TextScaled = true
    tabButton.BorderSizePixel = 0
    
    tabButtons[tabName] = tabButton
end

-- Active tab indicator
local activeIndicator = Instance.new("Frame")
activeIndicator.Name = "ActiveIndicator"
activeIndicator.Parent = navFrame
activeIndicator.BackgroundColor3 = Color3.fromRGB(70, 130, 220)
activeIndicator.BorderSizePixel = 0
activeIndicator.Position = UDim2.new(0.175, 0, 1, -3)
activeIndicator.Size = UDim2.new(0.15, 0, 0, 3)

-- Set Script tab as active initially
tabButtons["Script"].TextColor3 = Color3.fromRGB(70, 130, 220)

-- Content Frame
local contentFrame = Instance.new("Frame")
contentFrame.Name = "Content"
contentFrame.Parent = mainFrame
contentFrame.BackgroundColor3 = Color3.fromRGB(230, 235, 245)
contentFrame.BorderSizePixel = 0
contentFrame.Position = UDim2.new(0, 10, 0, 100)
contentFrame.Size = UDim2.new(1, -20, 1, -110)

local contentCorner = Instance.new("UICorner")
contentCorner.Parent = contentFrame
contentCorner.CornerRadius = UDim.new(0, 8)

-- Scrolling Frame cho nội dung
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Name = "ScrollContent"
scrollFrame.Parent = contentFrame
scrollFrame.BackgroundTransparency = 1
scrollFrame.BorderSizePixel = 0
scrollFrame.Size = UDim2.new(1, 0, 1, 0)
scrollFrame.CanvasSize = UDim2.new(0, 0, 2, 0)
scrollFrame.ScrollBarThickness = 8

-- Functions
local function switchTab(tabName)
    -- Reset all tabs
    for name, button in pairs(tabButtons) do
        button.TextColor3 = Color3.fromRGB(100, 100, 100)
    end
    
    -- Highlight selected tab
    tabButtons[tabName].TextColor3 = Color3.fromRGB(70, 130, 220)
    
    -- Move indicator
    local tabIndex = 0
    for i, name in ipairs(tabs) do
        if name == tabName then
            tabIndex = i
            break
        end
    end
    
    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
    local tween = TweenService:Create(
        activeIndicator,
        tweenInfo,
        {Position = UDim2.new((tabIndex-1) * 0.2 + 0.05 + 0.025, 0, 1, -3)}
    )
    tween:Play()
    
    -- Clear content and add tab-specific content
    for _, child in pairs(scrollFrame:GetChildren()) do
        if child:IsA("GuiObject") then
            child:Destroy()
        end
    end
    
    if tabName == "Home" then
        local welcomeText = Instance.new("TextLabel")
        welcomeText.Parent = scrollFrame
        welcomeText.BackgroundTransparency = 1
        welcomeText.Position = UDim2.new(0, 20, 0, 20)
        welcomeText.Size = UDim2.new(1, -40, 0, 50)
        welcomeText.Font = Enum.Font.GothamBold
        welcomeText.Text = "Welcome to Home Tab"
        welcomeText.TextColor3 = Color3.fromRGB(50, 50, 50)
        welcomeText.TextScaled = true
        welcomeText.TextXAlignment = Enum.TextXAlignment.Left
    elseif tabName == "Script" then
        local scriptText = Instance.new("TextLabel")
        scriptText.Parent = scrollFrame
        scriptText.BackgroundTransparency = 1
        scriptText.Position = UDim2.new(0, 20, 0, 20)
        scriptText.Size = UDim2.new(1, -40, 0, 50)
        scriptText.Font = Enum.Font.GothamBold
        scriptText.Text = "Script Hub"
        scriptText.TextColor3 = Color3.fromRGB(50, 50, 50)
        scriptText.TextScaled = true
        scriptText.TextXAlignment = Enum.TextXAlignment.Left
    end
end

-- Connect tab button events
for tabName, button in pairs(tabButtons) do
    button.MouseButton1Click:Connect(function()
        switchTab(tabName)
    end)
end

-- Close button functionality
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Minimize functionality
local isMinimized = false
minimizeButton.MouseButton1Click:Connect(function()
    if not isMinimized then
        local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
        local tween = TweenService:Create(
            mainFrame,
            tweenInfo,
            {Size = UDim2.new(0, 800, 0, 50)}
        )
        tween:Play()
        navFrame.Visible = false
        contentFrame.Visible = false
        isMinimized = true
    else
        local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
        local tween = TweenService:Create(
            mainFrame,
            tweenInfo,
            {Size = UDim2.new(0, 800, 0, 500)}
        )
        tween:Play()
        wait(0.3)
        navFrame.Visible = true
        contentFrame.Visible = true
        isMinimized = false
    end
end)

-- Dragging functionality
local dragging = false
local dragStart = nil
local startPos = nil

headerFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

headerFrame.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Initialize with Script tab
switchTab("Script")

print("Roblox UI loaded successfully!")