-- Roblox Chat UI Script
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local TextService = game:GetService("TextService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- T·∫°o ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ChatUI"
screenGui.Parent = playerGui
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Main Frame (Chat Window)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "ChatFrame"
mainFrame.Parent = screenGui
mainFrame.Size = UDim2.new(0, 320, 0, 400)
mainFrame.Position = UDim2.new(0.5, -160, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(45, 50, 60)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true

-- Corner cho main frame
local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 8)
mainCorner.Parent = mainFrame

-- Header Frame
local headerFrame = Instance.new("Frame")
headerFrame.Name = "Header"
headerFrame.Parent = mainFrame
headerFrame.Size = UDim2.new(1, 0, 0, 40)
headerFrame.Position = UDim2.new(0, 0, 0, 0)
headerFrame.BackgroundColor3 = Color3.fromRGB(35, 40, 50)
headerFrame.BorderSizePixel = 0

-- Header Corner
local headerCorner = Instance.new("UICorner")
headerCorner.CornerRadius = UDim.new(0, 8)
headerCorner.Parent = headerFrame

-- Title Label
local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "Title"
titleLabel.Parent = headerFrame
titleLabel.Size = UDim2.new(1, -80, 1, 0)
titleLabel.Position = UDim2.new(0, 10, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Open chatbot"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextScaled = true
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Font = Enum.Font.GothamBold

-- Minimize Button
local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Parent = headerFrame
minimizeButton.Size = UDim2.new(0, 30, 0, 30)
minimizeButton.Position = UDim2.new(1, -65, 0, 5)
minimizeButton.BackgroundColor3 = Color3.fromRGB(60, 65, 75)
minimizeButton.BorderSizePixel = 0
minimizeButton.Text = "‚ñ°"
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.TextScaled = true
minimizeButton.Font = Enum.Font.Gotham

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 4)
minimizeCorner.Parent = minimizeButton

-- Close Button
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Parent = headerFrame
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -30, 0, 5)
closeButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
closeButton.BorderSizePixel = 0
closeButton.Text = "√ó"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.TextScaled = true
closeButton.Font = Enum.Font.GothamBold

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 4)
closeCorner.Parent = closeButton

-- Chat Label
local chatLabel = Instance.new("TextLabel")
chatLabel.Name = "ChatLabel"
chatLabel.Parent = mainFrame
chatLabel.Size = UDim2.new(0, 50, 0, 25)
chatLabel.Position = UDim2.new(0, 10, 0, 50)
chatLabel.BackgroundTransparency = 1
chatLabel.Text = "Chat"
chatLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
chatLabel.TextScaled = true
chatLabel.TextXAlignment = Enum.TextXAlignment.Left
chatLabel.Font = Enum.Font.Gotham

-- Chat Messages ScrollingFrame
local chatScrollFrame = Instance.new("ScrollingFrame")
chatScrollFrame.Name = "ChatScroll"
chatScrollFrame.Parent = mainFrame
chatScrollFrame.Size = UDim2.new(1, -20, 1, -120)
chatScrollFrame.Position = UDim2.new(0, 10, 0, 80)
chatScrollFrame.BackgroundColor3 = Color3.fromRGB(35, 40, 50)
chatScrollFrame.BorderSizePixel = 0
chatScrollFrame.ScrollBarThickness = 8
chatScrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 105, 115)

local chatScrollCorner = Instance.new("UICorner")
chatScrollCorner.CornerRadius = UDim.new(0, 6)
chatScrollCorner.Parent = chatScrollFrame

-- UIListLayout cho chat messages
local chatListLayout = Instance.new("UIListLayout")
chatListLayout.Parent = chatScrollFrame
chatListLayout.SortOrder = Enum.SortOrder.LayoutOrder
chatListLayout.Padding = UDim.new(0, 5)

-- Input Frame
local inputFrame = Instance.new("Frame")
inputFrame.Name = "InputFrame"
inputFrame.Parent = mainFrame
inputFrame.Size = UDim2.new(1, -20, 0, 40)
inputFrame.Position = UDim2.new(0, 10, 1, -50)
inputFrame.BackgroundColor3 = Color3.fromRGB(55, 60, 70)
inputFrame.BorderSizePixel = 0

local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 6)
inputCorner.Parent = inputFrame

-- Input TextBox
local inputBox = Instance.new("TextBox")
inputBox.Name = "InputBox"
inputBox.Parent = inputFrame
inputBox.Size = UDim2.new(1, -20, 1, -10)
inputBox.Position = UDim2.new(0, 10, 0, 5)
inputBox.BackgroundTransparency = 1
inputBox.Text = ""
inputBox.PlaceholderText = "Type message here..."
inputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
inputBox.PlaceholderColor3 = Color3.fromRGB(150, 155, 165)
inputBox.TextScaled = true
inputBox.TextXAlignment = Enum.TextXAlignment.Left
inputBox.Font = Enum.Font.Gotham
inputBox.ClearTextOnFocus = false

-- Bi·∫øn ƒë·ªÉ theo d√µi tr·∫°ng th√°i
local isMinimized = false
local chatMessages = {}

-- H√†m t·∫°o tin nh·∫Øn chat
function createChatMessage(sender, message, isUser)
    local messageFrame = Instance.new("Frame")
    messageFrame.Name = "Message"
    messageFrame.Parent = chatScrollFrame
    messageFrame.Size = UDim2.new(1, -10, 0, 0)
    messageFrame.BackgroundTransparency = 1
    messageFrame.AutomaticSize = Enum.AutomaticSize.Y
    
    local messageLabel = Instance.new("TextLabel")
    messageLabel.Name = "MessageText"
    messageLabel.Parent = messageFrame
    messageLabel.Size = UDim2.new(1, -10, 0, 0)
    messageLabel.Position = UDim2.new(0, 5, 0, 0)
    messageLabel.BackgroundTransparency = 1
    messageLabel.Text = sender .. ": " .. message
    messageLabel.TextColor3 = isUser and Color3.fromRGB(100, 200, 255) or Color3.fromRGB(255, 255, 255)
    messageLabel.TextXAlignment = Enum.TextXAlignment.Left
    messageLabel.TextYAlignment = Enum.TextYAlignment.Top
    messageLabel.Font = Enum.Font.Gotham
    messageLabel.TextSize = 14
    messageLabel.TextWrapped = true
    messageLabel.AutomaticSize = Enum.AutomaticSize.Y
    
    messageFrame.Size = UDim2.new(1, -10, 0, messageLabel.AbsoluteSize.Y + 5)
    
    -- Scroll xu·ªëng cu·ªëi
    chatScrollFrame.CanvasSize = UDim2.new(0, 0, 0, chatListLayout.AbsoluteContentSize.Y)
    chatScrollFrame.CanvasPosition = Vector2.new(0, chatScrollFrame.AbsoluteCanvasSize.Y)
end

-- H√†m minimize/restore
function toggleMinimize()
    local targetSize = isMinimized and UDim2.new(0, 320, 0, 400) or UDim2.new(0, 320, 0, 40)
    local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Size = targetSize})
    tween:Play()
    isMinimized = not isMinimized
end

-- H√†m ƒë√≥ng chat
function closeChat()
    local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Size = UDim2.new(0, 0, 0, 0)})
    tween:Play()
    tween.Completed:Connect(function()
        screenGui:Destroy()
    end)
end

-- H√†m x·ª≠ l√Ω tin nh·∫Øn
function sendMessage()
    local message = inputBox.Text
    if message ~= "" then
        createChatMessage("You", message, true)
        inputBox.Text = ""
        
        -- Gi·∫£ l·∫≠p ph·∫£n h·ªìi bot v·ªõi r·∫•t nhi·ªÅu c√¢u tr·∫£ l·ªùi
        wait(math.random(1, 3)) -- Random delay ƒë·ªÉ realistic h∆°n
        
        local responses = {
            -- Ch√†o h·ªèi & Gi·ªõi thi·ªáu
            "Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?",
            "Ch√†o b·∫°n! H√¥m nay th·∫ø n√†o?",
            "Hi there! C·∫ßn h·ªó tr·ª£ g√¨ kh√¥ng?",
            "Hello! T√¥i l√† chatbot th√¥ng minh ƒë√¢y! ü§ñ",
            "Ch√†o m·ª´ng! B·∫°n c√≥ c√¢u h·ªèi g√¨ kh√¥ng?",
            "Xin ch√†o! T√¥i lu√¥n s·∫µn s√†ng tr√≤ chuy·ªán!",
            "Hey! C√≥ g√¨ th√∫ v·ªã mu·ªën chia s·∫ª kh√¥ng?",
            
            -- Ph·∫£n h·ªìi t√≠ch c·ª±c
            "Th·∫≠t tuy·ªát v·ªùi! ‚≠ê",
            "ƒêi·ªÅu ƒë√≥ r·∫•t th√∫ v·ªã!",
            "T√¥i hi·ªÉu √Ω b·∫°n r·ªìi! üëç",
            "C·∫£m ∆°n b·∫°n ƒë√£ chia s·∫ª!",
            "Hay qu√°! T√¥i th√≠ch ƒëi·ªÅu n√†y!",
            "Xu·∫•t s·∫Øc! üéâ",
            "Tuy·ªát v·ªùi l·∫Øm!",
            "Qu√° ƒë·ªânh! üî•",
            "B·∫°n th·∫≠t th√¥ng minh!",
            "√ù t∆∞·ªüng hay ƒë·∫•y! üí°",
            "Perfect! Ch√≠nh x√°c r·ªìi!",
            "Amazing! Kh√¥ng th·ªÉ tin ƒë∆∞·ª£c!",
            
            -- C√¢u h·ªèi & T√≤ m√≤
            "B·∫°n c√≥ th·ªÉ k·ªÉ th√™m v·ªÅ ƒëi·ªÅu ƒë√≥ kh√¥ng?",
            "B·∫°n nghƒ© sao v·ªÅ chuy·ªán n√†y?",
            "C√≥ g√¨ kh√°c b·∫°n mu·ªën n√≥i kh√¥ng?",
            "B·∫°n c·∫ßn t√¥i gi·∫£i th√≠ch th√™m g√¨ kh√¥ng?",
            "T·∫°i sao b·∫°n l·∫°i nghƒ© v·∫≠y?",
            "B·∫°n ƒë√£ th·ª≠ c√°ch n√†o kh√°c ch∆∞a?",
            "ƒêi·ªÅu g√¨ khi·∫øn b·∫°n quan t√¢m ƒë·∫øn chuy·ªán n√†y?",
            "B·∫°n c√≥ kinh nghi·ªám g√¨ v·ªÅ v·∫•n ƒë·ªÅ n√†y?",
            "C√≤n ai kh√°c bi·∫øt v·ªÅ ƒëi·ªÅu n√†y kh√¥ng?",
            "B·∫°n h·ªçc ƒë∆∞·ª£c g√¨ t·ª´ tr·∫£i nghi·ªám n√†y?",
            
            -- Tr·ª£ gi√∫p & H·ªó tr·ª£
            "T√¥i s·∫Ω c·ªë g·∫Øng gi√∫p b·∫°n! ü§ù",
            "ƒê·ªÉ t√¥i suy nghƒ© v·ªÅ ƒëi·ªÅu n√†y... ü§î",
            "C√≥ v·∫ª b·∫°n ƒëang c·∫ßn h·ªó tr·ª£!",
            "T√¥i ·ªü ƒë√¢y ƒë·ªÉ gi√∫p b·∫°n!",
            "ƒê·ª´ng lo, ch√∫ng ta s·∫Ω t√¨m ra c√°ch!",
            "T√¥i s·∫Ω h∆∞·ªõng d·∫´n b·∫°n t·ª´ng b∆∞·ªõc!",
            "C√πng nhau gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y nh√©!",
            "B·∫°n c√≥ th·ªÉ tin t∆∞·ªüng v√†o t√¥i!",
            "T√¥i c√≥ m·ªôt s·ªë g·ª£i √Ω cho b·∫°n!",
            
            -- Game/Roblox/Coding
            "B·∫°n c√≥ ch∆°i game g√¨ hay kh√¥ng? üéÆ",
            "Roblox th·∫≠t tuy·ªát ph·∫£i kh√¥ng?",
            "B·∫°n th√≠ch t·∫°o game hay ch∆°i game h∆°n?",
            "C√≥ script n√†o b·∫°n mu·ªën t√¨m hi·ªÉu kh√¥ng?",
            "B·∫°n ƒë√£ th·ª≠ coding Lua ch∆∞a?",
            "Game n√†o b·∫°n th√≠ch nh·∫•t trong Roblox?",
            "B·∫°n c√≥ l√†m UI/UX cho game kh√¥ng?",
            "Studio Roblox c√≥ kh√≥ h·ªçc kh√¥ng?",
            "B·∫°n c√≥ team ƒë·ªÉ l√†m game chung kh√¥ng?",
            "Scripting hay Building, b·∫°n th√≠ch c√°i n√†o h∆°n?",
            "B·∫°n c√≥ publish game n√†o tr√™n Roblox ch∆∞a?",
            
            -- Vui nh·ªôn & Emoji
            "Haha, th√∫ v·ªã ƒë·∫•y! üòÑ",
            "B·∫°n l√†m t√¥i c∆∞·ªùi r·ªìi! üòÇ",
            "ƒê√≥ l√† m·ªôt c√¢u chuy·ªán hay!",
            "Wow, kh√¥ng ng·ªù! üò≤",
            "LOL! B·∫°n h√†i h∆∞·ªõc qu√°! ü§£",
            "OMG! Th·∫≠t kh√¥ng th·ªÉ tin ƒë∆∞·ª£c! üò±",
            "Hehe, cute ƒë·∫•y! ü•∞",
            "Aww, d·ªÖ th∆∞∆°ng qu√°! üíï",
            "Bruh! Sao l·∫°i th·∫ø! üòÖ",
            "Epic! Qu√° ƒë·ªânh! üöÄ",
            "No way! Th·∫≠t √†? ü§Ø",
            
            -- ƒê·ªông vi√™n & Kh√≠ch l·ªá
            "B·∫°n l√†m r·∫•t t·ªët! üí™",
            "C·ªë l√™n! B·∫°n c√≥ th·ªÉ l√†m ƒë∆∞·ª£c!",
            "ƒê·ª´ng b·ªè cu·ªôc, b·∫°n g·∫ßn th√†nh c√¥ng r·ªìi!",
            "T√¥i tin b·∫°n s·∫Ω th√†nh c√¥ng!",
            "B·∫°n m·∫°nh m·∫Ω h∆°n b·∫°n nghƒ©!",
            "Keep going! B·∫°n ƒëang tr√™n ƒë√∫ng h∆∞·ªõng!",
            "M·ªói th·∫•t b·∫°i l√† m·ªôt b√†i h·ªçc!",
            "B·∫°n ƒë√£ ti·∫øn b·ªô r·∫•t nhi·ªÅu r·ªìi!",
            
            -- K·∫øt th√∫c & Ch√†o t·∫°m bi·ªát
            "C·∫£m ∆°n b·∫°n ƒë√£ chat! üôè",
            "H·∫πn g·∫∑p l·∫°i b·∫°n sau! üëã",
            "Ch√∫c b·∫°n m·ªôt ng√†y t·ªët l√†nh! ‚òÄÔ∏è",
            "Bye bye! Take care! üíô",
            "See you later! üåü",
            "Ch√∫c b·∫°n may m·∫Øn! üçÄ",
            "T·∫°m bi·ªát v√† ch√∫c ng·ªß ngon! üåô",
            "Have a great day! ‚ú®",
            
            -- Random & ƒêa d·∫°ng
            "ü§î Hmm... th√∫ v·ªã ƒë·∫•y!",
            "Th·∫≠t sao? K·ªÉ th√™m ƒëi!",
            "·ªí, th·∫ø √†! Cool!",
            "Nghe hay ƒë·∫•y! üéµ",
            "B·∫°n gi·ªèi qu√°! üåü",
            "T√¥i ƒë·ªìng √Ω v·ªõi b·∫°n! ‚úÖ",
            "ƒê√∫ng r·ªìi! Ch√≠nh x√°c! üéØ",
            "Tuy·ªát v·ªùi! üéä",
            "Si√™u ph·∫©m! üíé",
            "B·∫°n l√† thi√™n t√†i! üß†",
            "Mind blown! ü§Ø",
            "That's fire! üî•",
            "Legit! Th·∫≠t ƒë·∫•y!",
            "Slay! Qu√° ƒë·ªânh!",
            "Vibes! C·∫£m gi√°c tuy·ªát!",
            "Mood! ƒê√∫ng gu!",
            "Facts! S·ª± th·∫≠t ƒë·∫•y!",
            "Based! C√≥ l√Ω!",
            
            -- C√¢u h·ªèi v·ªÅ s·ªü th√≠ch
            "B·∫°n th√≠ch l√†m g√¨ trong th·ªùi gian r·∫£nh?",
            "M√†u s·∫Øc n√†o b·∫°n y√™u th√≠ch nh·∫•t?",
            "B·∫°n c√≥ s·ªü th√≠ch n√†o ƒë·∫∑c bi·ªát kh√¥ng?",
            "M√≥n ƒÉn y√™u th√≠ch c·ªßa b·∫°n l√† g√¨?",
            "B·∫°n th√≠ch nghe nh·∫°c th·ªÉ lo·∫°i n√†o?",
            "B·∫°n c√≥ pet kh√¥ng? Cute kh√¥ng? üê∂",
            
            -- V·ªÅ c√¥ng ngh·ªá & t∆∞∆°ng lai
            "AI c√≥ thay th·∫ø con ng∆∞·ªùi kh√¥ng nh·ªâ? ü§ñ",
            "C√¥ng ngh·ªá ng√†y c√†ng ph√°t tri·ªÉn nh·ªâ!",
            "VR/AR c√≥ th√∫ v·ªã kh√¥ng?",
            "Metaverse s·∫Ω nh∆∞ th·∫ø n√†o nh·ªâ?",
            "B·∫°n c√≥ s·ª£ robot kh√¥ng? üòÖ",
            
            -- Tri·∫øt l√Ω & suy ng·∫´m
            "Cu·ªôc s·ªëng th·∫≠t th√∫ v·ªã ph·∫£i kh√¥ng?",
            "M·ªói ng√†y ƒë·ªÅu c√≥ ƒëi·ªÅu m·ªõi m·∫ª!",
            "H·ªçc h·ªèi l√† h·∫°nh ph√∫c l·ªõn nh·∫•t!",
            "B·∫°n c√≥ tin v√†o ƒë·ªãnh m·ªánh kh√¥ng?",
            "∆Ø·ªõc m∆° c·ªßa b·∫°n l√† g√¨?",
            
            -- Th·ªùi ti·∫øt & m√¥i tr∆∞·ªùng
            "H√¥m nay tr·ªùi ƒë·∫πp kh√¥ng? ‚òÄÔ∏è",
            "B·∫°n th√≠ch m√πa n√†o nh·∫•t?",
            "M∆∞a hay n·∫Øng, b·∫°n th√≠ch c√°i n√†o?",
            "B·∫°n c√≥ quan t√¢m ƒë·∫øn m√¥i tr∆∞·ªùng kh√¥ng? üå±"
        }
        
        local randomResponse = responses[math.random(1, #responses)]
        createChatMessage("Bot", randomResponse, false)
    end
end

-- K·∫øt n·ªëi events
closeButton.MouseButton1Click:Connect(closeChat)
minimizeButton.MouseButton1Click:Connect(toggleMinimize)
inputBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        sendMessage()
    end
end)

-- Hover effects cho buttons
closeButton.MouseEnter:Connect(function()
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
end)

closeButton.MouseLeave:Connect(function()
    closeButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
end)

minimizeButton.MouseEnter:Connect(function()
    minimizeButton.BackgroundColor3 = Color3.fromRGB(80, 85, 95)
end)

minimizeButton.MouseLeave:Connect(function()
    minimizeButton.BackgroundColor3 = Color3.fromRGB(60, 65, 75)
end)

-- Tin nh·∫Øn ch√†o m·ª´ng
createChatMessage("Bot", "Xin ch√†o! Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi chatbot! ü§ñ", false)
createChatMessage("Bot", "H√£y g√µ tin nh·∫Øn ƒë·ªÉ b·∫Øt ƒë·∫ßu tr√≤ chuy·ªán nh√©!", false)