-- Mila UI Script for Roblox - Tab System
-- Tạo bởi: Mila
-- Tính năng: Speed, Jump, Fly, Noclip, Teleport, Infinite Jump

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Variables
local noclip = false
local infiniteJump = false
local originalWalkSpeed = 16
local originalJumpPower = 50
local jumpConnection
local currentTab = "Home"

-- UI Creation
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MilaUI"
screenGui.Parent = CoreGui
screenGui.ResetOnSpawn = false

-- Main Container
local mainContainer = Instance.new("Frame")
mainContainer.Name = "MainContainer"
mainContainer.Size = UDim2.new(0, 500, 0, 400)
mainContainer.Position = UDim2.new(0.5, -250, 0.5, -200)
mainContainer.BackgroundColor3 = Color3.new(1, 0.4, 0.5) -- Pink background like image
mainContainer.BorderSizePixel = 0
mainContainer.Active = true
mainContainer.Draggable = true
mainContainer.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 20)
mainCorner.Parent = mainContainer

-- Tab Container
local tabContainer = Instance.new("Frame")
tabContainer.Name = "TabContainer"
tabContainer.Size = UDim2.new(0, 500, 0, 50)
tabContainer.Position = UDim2.new(0, 0, 0, 0)
tabContainer.BackgroundTransparency = 1
tabContainer.Parent = mainContainer

-- Home Tab
local homeTab = Instance.new("TextButton")
homeTab.Name = "HomeTab"
homeTab.Size = UDim2.new(0, 240, 0, 40)
homeTab.Position = UDim2.new(0, 20, 0, 5)
homeTab.BackgroundColor3 = Color3.new(1, 1, 1) -- White when active
homeTab.Text = "Home"
homeTab.TextColor3 = Color3.new(0, 0, 0)
homeTab.TextSize = 18
homeTab.Font = Enum.Font.GothamBold
homeTab.Parent = tabContainer

local homeTabCorner = Instance.new("UICorner")
homeTabCorner.CornerRadius = UDim.new(0, 12)
homeTabCorner.Parent = homeTab

-- Script Tab
local scriptTab = Instance.new("TextButton")
scriptTab.Name = "ScriptTab"
scriptTab.Size = UDim2.new(0, 240, 0, 40)
scriptTab.Position = UDim2.new(0, 240, 0, 5)
scriptTab.BackgroundColor3 = Color3.new(0.9, 0.9, 0.9) -- Light gray when inactive
scriptTab.Text = "Script"
scriptTab.TextColor3 = Color3.new(0.3, 0.3, 0.3)
scriptTab.TextSize = 18
scriptTab.Font = Enum.Font.GothamBold
scriptTab.Parent = tabContainer

local scriptTabCorner = Instance.new("UICorner")
scriptTabCorner.CornerRadius = UDim.new(0, 12)
scriptTabCorner.Parent = scriptTab

-- Content Frame
local contentFrame = Instance.new("Frame")
contentFrame.Name = "ContentFrame"
contentFrame.Size = UDim2.new(1, -40, 1, -70)
contentFrame.Position = UDim2.new(0, 20, 0, 50)
contentFrame.BackgroundColor3 = Color3.new(1, 1, 1) -- White content area
contentFrame.BorderSizePixel = 0
contentFrame.Parent = mainContainer

local contentCorner = Instance.new("UICorner")
contentCorner.CornerRadius = UDim.new(0, 15)
contentCorner.Parent = contentFrame

-- Home Content (ScrollingFrame)
local homeContent = Instance.new("ScrollingFrame")
homeContent.Name = "HomeContent"
homeContent.Size = UDim2.new(1, -20, 1, -20)
homeContent.Position = UDim2.new(0, 10, 0, 10)
homeContent.BackgroundTransparency = 1
homeContent.ScrollBarThickness = 6
homeContent.CanvasSize = UDim2.new(0, 0, 0, 500)
homeContent.Parent = contentFrame

-- Script Content (Hidden initially)
local scriptContent = Instance.new("ScrollingFrame")
scriptContent.Name = "ScriptContent"
scriptContent.Size = UDim2.new(1, -20, 1, -20)
scriptContent.Position = UDim2.new(0, 10, 0, 10)
scriptContent.BackgroundTransparency = 1
scriptContent.ScrollBarThickness = 6
scriptContent.CanvasSize = UDim2.new(0, 0, 0, 300)
scriptContent.Visible = false
scriptContent.Parent = contentFrame

-- Script Content Text (Placeholder)
local scriptText = Instance.new("TextLabel")
scriptText.Size = UDim2.new(1, 0, 0, 200)
scriptText.Position = UDim2.new(0, 0, 0, 50)
scriptText.BackgroundTransparency = 1
scriptText.Text = "Script tab - Coming soon!\nThis area will contain additional scripts and features."
scriptText.TextColor3 = Color3.new(0.5, 0.5, 0.5)
scriptText.TextSize = 16
scriptText.Font = Enum.Font.Gotham
scriptText.TextWrapped = true
scriptText.Parent = scriptContent

-- Close Button
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -35, 0, 5)
closeButton.BackgroundColor3 = Color3.new(1, 0.3, 0.3)
closeButton.Text = "✕"
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.TextSize = 16
closeButton.Font = Enum.Font.GothamBold
closeButton.Parent = mainContainer

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 15)
closeCorner.Parent = closeButton

-- Toggle Button (when closed)
local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 100, 0, 40)
toggleButton.Position = UDim2.new(0, 10, 0, 10)
toggleButton.BackgroundColor3 = Color3.new(1, 0.4, 0.5)
toggleButton.Text = "Mila 💖"
toggleButton.TextColor3 = Color3.new(1, 1, 1)
toggleButton.TextSize = 14
toggleButton.Font = Enum.Font.GothamBold
toggleButton.Visible = false
toggleButton.Parent = screenGui

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 10)
toggleCorner.Parent = toggleButton

-- Button Creation Function for Home Tab
local function createHomeButton(name, text, position, callback)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = UDim2.new(0, 140, 0, 35)
    button.Position = position
    button.BackgroundColor3 = Color3.new(1, 0.4, 0.5)
    button.Text = text
    button.TextColor3 = Color3.new(1, 1, 1)
    button.TextSize = 13
    button.Font = Enum.Font.GothamBold
    button.Parent = homeContent
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 10)
    buttonCorner.Parent = button
    
    button.MouseButton1Click:Connect(callback)
    
    -- Hover effect
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = Color3.new(1, 0.5, 0.6)
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = Color3.new(1, 0.4, 0.5)
    end)
    
    return button
end

-- Speed Controls
local speedLabel = Instance.new("TextLabel")
speedLabel.Size = UDim2.new(1, 0, 0, 25)
speedLabel.Position = UDim2.new(0, 0, 0, 10)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "⚡ Speed Control"
speedLabel.TextColor3 = Color3.new(0.2, 0.2, 0.2)
speedLabel.TextSize = 16
speedLabel.Font = Enum.Font.GothamBold
speedLabel.Parent = homeContent

local speedSlider = Instance.new("TextBox")
speedSlider.Size = UDim2.new(0, 100, 0, 30)
speedSlider.Position = UDim2.new(0, 20, 0, 40)
speedSlider.BackgroundColor3 = Color3.new(0.95, 0.95, 0.95)
speedSlider.Text = "16"
speedSlider.TextColor3 = Color3.new(0, 0, 0)
speedSlider.TextSize = 12
speedSlider.PlaceholderText = "Speed"
speedSlider.Parent = homeContent

local speedCorner = Instance.new("UICorner")
speedCorner.CornerRadius = UDim.new(0, 8)
speedCorner.Parent = speedSlider

local applySpeedBtn = Instance.new("TextButton")
applySpeedBtn.Size = UDim2.new(0, 80, 0, 30)
applySpeedBtn.Position = UDim2.new(0, 130, 0, 40)
applySpeedBtn.BackgroundColor3 = Color3.new(0.2, 0.8, 0.2)
applySpeedBtn.Text = "Apply"
applySpeedBtn.TextColor3 = Color3.new(1, 1, 1)
applySpeedBtn.TextSize = 12
applySpeedBtn.Font = Enum.Font.Gotham
applySpeedBtn.Parent = homeContent

local applySpeedCorner = Instance.new("UICorner")
applySpeedCorner.CornerRadius = UDim.new(0, 8)
applySpeedCorner.Parent = applySpeedBtn

-- Jump Controls
local jumpLabel = Instance.new("TextLabel")
jumpLabel.Size = UDim2.new(1, 0, 0, 25)
jumpLabel.Position = UDim2.new(0, 0, 0, 80)
jumpLabel.BackgroundTransparency = 1
jumpLabel.Text = "🦘 Jump Control"
jumpLabel.TextColor3 = Color3.new(0.2, 0.2, 0.2)
jumpLabel.TextSize = 16
jumpLabel.Font = Enum.Font.GothamBold
jumpLabel.Parent = homeContent

local jumpSlider = Instance.new("TextBox")
jumpSlider.Size = UDim2.new(0, 100, 0, 30)
jumpSlider.Position = UDim2.new(0, 20, 0, 110)
jumpSlider.BackgroundColor3 = Color3.new(0.95, 0.95, 0.95)
jumpSlider.Text = "50"
jumpSlider.TextColor3 = Color3.new(0, 0, 0)
jumpSlider.TextSize = 12
jumpSlider.PlaceholderText = "Jump Power"
jumpSlider.Parent = homeContent

local jumpCorner = Instance.new("UICorner")
jumpCorner.CornerRadius = UDim.new(0, 8)
jumpCorner.Parent = jumpSlider

local applyJumpBtn = Instance.new("TextButton")
applyJumpBtn.Size = UDim2.new(0, 80, 0, 30)
applyJumpBtn.Position = UDim2.new(0, 130, 0, 110)
applyJumpBtn.BackgroundColor3 = Color3.new(0.2, 0.8, 0.2)
applyJumpBtn.Text = "Apply"
applyJumpBtn.TextColor3 = Color3.new(1, 1, 1)
applyJumpBtn.TextSize = 12
applyJumpBtn.Font = Enum.Font.Gotham
applyJumpBtn.Parent = homeContent

local applyJumpCorner = Instance.new("UICorner")
applyJumpCorner.CornerRadius = UDim.new(0, 8)
applyJumpCorner.Parent = applyJumpBtn

-- Features Label
local featuresLabel = Instance.new("TextLabel")
featuresLabel.Size = UDim2.new(1, 0, 0, 25)
featuresLabel.Position = UDim2.new(0, 0, 0, 160)
featuresLabel.BackgroundTransparency = 1
featuresLabel.Text = "🎮 Features"
featuresLabel.TextColor3 = Color3.new(0.2, 0.2, 0.2)
featuresLabel.TextSize = 16
featuresLabel.Font = Enum.Font.GothamBold
featuresLabel.Parent = homeContent

-- Player List Frame (Right side)
local playerFrame = Instance.new("Frame")
playerFrame.Name = "PlayerFrame"
playerFrame.Size = UDim2.new(0, 200, 0, 350)
playerFrame.Position = UDim2.new(0.5, 260, 0.5, -175)
playerFrame.BackgroundColor3 = Color3.new(1, 1, 1)
playerFrame.BorderSizePixel = 0
playerFrame.Visible = false
playerFrame.Parent = screenGui

local playerFrameCorner = Instance.new("UICorner")
playerFrameCorner.CornerRadius = UDim.new(0, 15)
playerFrameCorner.Parent = playerFrame

-- Player Frame Header
local playerHeader = Instance.new("Frame")
playerHeader.Size = UDim2.new(1, 0, 0, 40)
playerHeader.BackgroundColor3 = Color3.new(1, 0.4, 0.5)
playerHeader.Parent = playerFrame

local playerHeaderCorner = Instance.new("UICorner")
playerHeaderCorner.CornerRadius = UDim.new(0, 15)
playerHeaderCorner.Parent = playerHeader

-- Player Title
local playerTitle = Instance.new("TextLabel")
playerTitle.Size = UDim2.new(1, 0, 1, 0)
playerTitle.BackgroundTransparency = 1
playerTitle.Text = "👥 Players"
playerTitle.TextColor3 = Color3.new(1, 1, 1)
playerTitle.TextSize = 16
playerTitle.Font = Enum.Font.GothamBold
playerTitle.Parent = playerHeader

local playerList = Instance.new("ScrollingFrame")
playerList.Name = "PlayerList"
playerList.Size = UDim2.new(1, -10, 1, -50)
playerList.Position = UDim2.new(0, 5, 0, 45)
playerList.BackgroundTransparency = 1
playerList.ScrollBarThickness = 4
playerList.Parent = playerFrame

local listLayout = Instance.new("UIListLayout")
listLayout.Padding = UDim.new(0, 5)
listLayout.Parent = playerList

-- Functions
local function updatePlayerList()
    for _, child in pairs(playerList:GetChildren()) do
        if child:IsA("Frame") then
            child:Destroy()
        end
    end
    
    for _, targetPlayer in pairs(Players:GetPlayers()) do
        if targetPlayer ~= player then
            local playerContainer = Instance.new("Frame")
            playerContainer.Size = UDim2.new(1, 0, 0, 70)
            playerContainer.BackgroundColor3 = Color3.new(0.98, 0.98, 0.98)
            playerContainer.Parent = playerList
            
            local containerCorner = Instance.new("UICorner")
            containerCorner.CornerRadius = UDim.new(0, 8)
            containerCorner.Parent = playerContainer
            
            local playerName = Instance.new("TextLabel")
            playerName.Size = UDim2.new(1, 0, 0, 25)
            playerName.Position = UDim2.new(0, 0, 0, 5)
            playerName.BackgroundTransparency = 1
            playerName.Text = targetPlayer.Name
            playerName.TextSize = 12
            playerName.Font = Enum.Font.GothamBold
            playerName.TextColor3 = Color3.new(0.2, 0.2, 0.2)
            playerName.Parent = playerContainer
            
            local teleportBtn = Instance.new("TextButton")
            teleportBtn.Size = UDim2.new(0.45, 0, 0, 25)
            teleportBtn.Position = UDim2.new(0, 5, 0, 35)
            teleportBtn.BackgroundColor3 = Color3.new(0.3, 0.6, 1)
            teleportBtn.Text = "📍 TP"
            teleportBtn.TextSize = 10
            teleportBtn.Font = Enum.Font.Gotham
            teleportBtn.TextColor3 = Color3.new(1, 1, 1)
            teleportBtn.Parent = playerContainer
            
            local tpCorner = Instance.new("UICorner")
            tpCorner.CornerRadius = UDim.new(0, 5)
            tpCorner.Parent = teleportBtn
            
            local viewBtn = Instance.new("TextButton")
            viewBtn.Size = UDim2.new(0.45, 0, 0, 25)
            viewBtn.Position = UDim2.new(0.55, 0, 0, 35)
            viewBtn.BackgroundColor3 = Color3.new(1, 0.6, 0.2)
            viewBtn.Text = "👁️ View"
            viewBtn.TextSize = 10
            viewBtn.Font = Enum.Font.Gotham
            viewBtn.TextColor3 = Color3.new(1, 1, 1)
            viewBtn.Parent = playerContainer
            
            local viewCorner = Instance.new("UICorner")
            viewCorner.CornerRadius = UDim.new(0, 5)
            viewCorner.Parent = viewBtn
            
            teleportBtn.MouseButton1Click:Connect(function()
                if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame
                end
            end)
            
            viewBtn.MouseButton1Click:Connect(function()
                if targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
                    workspace.CurrentCamera.CameraSubject = targetPlayer.Character.Humanoid
                end
            end)
        end
    end
    
    playerList.CanvasSize = UDim2.new(0, 0, 0, #Players:GetPlayers() * 75)
end

local function toggleNoclip()
    noclip = not noclip
    if noclip then
        local connection
        connection = RunService.Stepped:Connect(function()
            if not noclip then
                connection:Disconnect()
                return
            end
            for _, part in pairs(character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
    else
        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                part.CanCollide = true
            end
        end
    end
end

local function toggleInfiniteJump()
    infiniteJump = not infiniteJump
    if infiniteJump then
        jumpConnection = UserInputService.JumpRequest:Connect(function()
            if character and character:FindFirstChild("Humanoid") then
                character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end)
    else
        if jumpConnection then
            jumpConnection:Disconnect()
            jumpConnection = nil
        end
    end
end

local function resetCamera()
    workspace.CurrentCamera.CameraSubject = character.Humanoid
end

local function loadFlyScript()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Sddnin4/Mila/refs/heads/main/Fly"))()
    end)
end

local function switchTab(tabName)
    currentTab = tabName
    
    if tabName == "Home" then
        homeTab.BackgroundColor3 = Color3.new(1, 1, 1)
        homeTab.TextColor3 = Color3.new(0, 0, 0)
        scriptTab.BackgroundColor3 = Color3.new(0.9, 0.9, 0.9)
        scriptTab.TextColor3 = Color3.new(0.3, 0.3, 0.3)
        
        homeContent.Visible = true
        scriptContent.Visible = false
    else
        homeTab.BackgroundColor3 = Color3.new(0.9, 0.9, 0.9)
        homeTab.TextColor3 = Color3.new(0.3, 0.3, 0.3)
        scriptTab.BackgroundColor3 = Color3.new(1, 1, 1)
        scriptTab.TextColor3 = Color3.new(0, 0, 0)
        
        homeContent.Visible = false
        scriptContent.Visible = true
    end
end

-- Create Home Buttons
createHomeButton("FlyButton", "🕊️ Fly", UDim2.new(0, 20, 0, 200), function()
    loadFlyScript()
end)

createHomeButton("NoclipButton", "👻 Noclip", UDim2.new(0, 180, 0, 200), function()
    toggleNoclip()
end)

createHomeButton("InfiniteJumpButton", "♾️ Infinite Jump", UDim2.new(0, 340, 0, 200), function()
    toggleInfiniteJump()
end)

createHomeButton("TeleportButton", "📍 Teleport", UDim2.new(0, 20, 0, 250), function()
    playerFrame.Visible = not playerFrame.Visible
    if playerFrame.Visible then
        updatePlayerList()
    end
end)

createHomeButton("CameraButton", "📷 Reset Cam", UDim2.new(0, 180, 0, 250), function()
    resetCamera()
end)

createHomeButton("ResetButton", "🔄 Reset All", UDim2.new(0, 340, 0, 250), function()
    humanoid.WalkSpeed = originalWalkSpeed
    humanoid.JumpPower = originalJumpPower
    noclip = false
    infiniteJump = false
    if jumpConnection then
        jumpConnection:Disconnect()
        jumpConnection = nil
    end
    speedSlider.Text = "16"
    jumpSlider.Text = "50"
    playerFrame.Visible = false
    resetCamera()
    
    for _, part in pairs(character:GetChildren()) do
        if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
            part.CanCollide = true
        end
    end
end)

-- Apply Button Functions
applySpeedBtn.MouseButton1Click:Connect(function()
    local speed = tonumber(speedSlider.Text) or 16
    humanoid.WalkSpeed = speed
    
    applySpeedBtn.BackgroundColor3 = Color3.new(0.1, 0.9, 0.1)
    wait(0.1)
    applySpeedBtn.BackgroundColor3 = Color3.new(0.2, 0.8, 0.2)
end)

applyJumpBtn.MouseButton1Click:Connect(function()
    local jump = tonumber(jumpSlider.Text) or 50
    humanoid.JumpPower = jump
    
    applyJumpBtn.BackgroundColor3 = Color3.new(0.1, 0.9, 0.1)
    wait(0.1)
    applyJumpBtn.BackgroundColor3 = Color3.new(0.2, 0.8, 0.2)
end)

-- Tab Events
homeTab.MouseButton1Click:Connect(function()
    switchTab("Home")
end)

scriptTab.MouseButton1Click:Connect(function()
    switchTab("Script")
end)

-- Close/Toggle functionality
closeButton.MouseButton1Click:Connect(function()
    mainContainer.Visible = false
    toggleButton.Visible = true
    playerFrame.Visible = false
end)

toggleButton.MouseButton1Click:Connect(function()
    mainContainer.Visible = true
    toggleButton.Visible = false
end)

-- Keyboard shortcut to toggle UI (Right Shift)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.RightShift then
        if mainContainer.Visible then
            mainContainer.Visible = false
            toggleButton.Visible = true
            playerFrame.Visible = false
        else
            mainContainer.Visible = true
            toggleButton.Visible = false
        end
    end
end)

-- Character respawn handling
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    humanoid = character:WaitForChild("Humanoid")
    noclip = false
    infiniteJump = false
    if jumpConnection then
        jumpConnection:Disconnect()
        jumpConnection = nil
    end
    wait(1)
    humanoid.WalkSpeed = originalWalkSpeed
    humanoid.JumpPower = originalJumpPower
end)

-- Initialize
switchTab("Home")

print("Mila UI với Tab System đã được tải thành công! 💖")
print("Nhấn Right Shift để bật/tắt UI")