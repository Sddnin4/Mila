-- by: Mila

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Variables
local noclip = false
local infiniteJump = false
local noGravity = false
local originalWalkSpeed = 16
local originalJumpPower = 50
local jumpConnection
local gravityConnection
local currentTab = "Home"

-- UI Creation
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MilaUI"
screenGui.Parent = CoreGui
screenGui.ResetOnSpawn = false

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 400, 0, 300)
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.fromRGB(245, 79, 108) -- Pink red background
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 20)
mainCorner.Parent = mainFrame

-- Tab Container
local tabContainer = Instance.new("Frame")
tabContainer.Size = UDim2.new(1, -40, 0, 40)
tabContainer.Position = UDim2.new(0, 20, 0, 20)
tabContainer.BackgroundTransparency = 1
tabContainer.Parent = mainFrame

-- Home Tab
local homeTab = Instance.new("TextButton")
homeTab.Size = UDim2.new(0, 120, 1, 0)
homeTab.Position = UDim2.new(0, 0, 0, 0)
homeTab.BackgroundColor3 = Color3.new(1, 1, 1)
homeTab.Text = "Home"
homeTab.TextColor3 = Color3.new(0, 0, 0)
homeTab.TextSize = 16
homeTab.Font = Enum.Font.GothamBold
homeTab.Parent = tabContainer

local homeCorner = Instance.new("UICorner")
homeCorner.CornerRadius = UDim.new(0, 10)
homeCorner.Parent = homeTab

-- Script Tab
local scriptTab = Instance.new("TextButton")
scriptTab.Size = UDim2.new(0, 120, 1, 0)
scriptTab.Position = UDim2.new(0, 130, 0, 0)
scriptTab.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
scriptTab.Text = "Script"
scriptTab.TextColor3 = Color3.new(0, 0, 0)
scriptTab.TextSize = 16
scriptTab.Font = Enum.Font.Gotham
scriptTab.Parent = tabContainer

local scriptCorner = Instance.new("UICorner")
scriptCorner.CornerRadius = UDim.new(0, 10)
scriptCorner.Parent = scriptTab

-- Content Area
local contentArea = Instance.new("Frame")
contentArea.Size = UDim2.new(1, -40, 1, -80)
contentArea.Position = UDim2.new(0, 20, 0, 70)
contentArea.BackgroundColor3 = Color3.new(0.95, 0.95, 0.95)
contentArea.BorderSizePixel = 0
contentArea.Parent = mainFrame

local contentCorner = Instance.new("UICorner")
contentCorner.CornerRadius = UDim.new(0, 15)
contentCorner.Parent = contentArea

-- Close Button
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -40, 0, 10)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
closeButton.Text = "√ó"
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.TextSize = 18
closeButton.Font = Enum.Font.GothamBold
closeButton.Parent = mainFrame

local closeBtnCorner = Instance.new("UICorner")
closeBtnCorner.CornerRadius = UDim.new(0, 15)
closeBtnCorner.Parent = closeButton

-- HOME TAB CONTENT
local homeContent = Instance.new("ScrollingFrame")
homeContent.Size = UDim2.new(1, -10, 1, -10)
homeContent.Position = UDim2.new(0, 5, 0, 5)
homeContent.BackgroundTransparency = 1
homeContent.ScrollBarThickness = 6
homeContent.CanvasSize = UDim2.new(0, 0, 0, 400)
homeContent.Parent = contentArea

-- Speed/Jump Controls
local speedLabel = Instance.new("TextLabel")
speedLabel.Size = UDim2.new(0.5, -5, 0, 25)
speedLabel.Position = UDim2.new(0, 0, 0, 10)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "Speed: 16"
speedLabel.TextSize = 14
speedLabel.Font = Enum.Font.Gotham
speedLabel.Parent = homeContent

local speedBox = Instance.new("TextBox")
speedBox.Size = UDim2.new(0.3, 0, 0, 25)
speedBox.Position = UDim2.new(0, 0, 0, 35)
speedBox.Text = "16"
speedBox.TextSize = 12
speedBox.Parent = homeContent

local applySpeed = Instance.new("TextButton")
applySpeed.Size = UDim2.new(0.15, 0, 0, 25)
applySpeed.Position = UDim2.new(0.35, 0, 0, 35)
applySpeed.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
applySpeed.Text = "OK"
applySpeed.TextSize = 12
applySpeed.Parent = homeContent

local jumpLabel = Instance.new("TextLabel")
jumpLabel.Size = UDim2.new(0.5, -5, 0, 25)
jumpLabel.Position = UDim2.new(0.5, 5, 0, 10)
jumpLabel.BackgroundTransparency = 1
jumpLabel.Text = "Jump: 50"
jumpLabel.TextSize = 14
jumpLabel.Font = Enum.Font.Gotham
jumpLabel.Parent = homeContent

local jumpBox = Instance.new("TextBox")
jumpBox.Size = UDim2.new(0.3, 0, 0, 25)
jumpBox.Position = UDim2.new(0.5, 5, 0, 35)
jumpBox.Text = "50"
jumpBox.TextSize = 12
jumpBox.Parent = homeContent

local applyJump = Instance.new("TextButton")
applyJump.Size = UDim2.new(0.15, 0, 0, 25)
applyJump.Position = UDim2.new(0.85, 0, 0, 35)
applyJump.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
applyJump.Text = "OK"
applyJump.TextSize = 12
applyJump.Parent = applyJump

-- Function Buttons
local buttonData = {
    {"üèÉ Speed", UDim2.new(0, 10, 0, 80)},
    {"ü¶ò Jump", UDim2.new(0.33, 0, 0, 80)},
    {"üëª Noclip", UDim2.new(0.66, 0, 0, 80)},
    {"‚ôæÔ∏è InfJump", UDim2.new(0, 10, 0, 120)},
    {"üïäÔ∏è Fly", UDim2.new(0.33, 0, 0, 120)},
    {"üåç NoGrav", UDim2.new(0.66, 0, 0, 120)},
    {"üìç Players", UDim2.new(0, 10, 0, 160)},
    {"üì∑ ResetCam", UDim2.new(0.33, 0, 0, 160)},
    {"üîÑ Reset", UDim2.new(0.66, 0, 0, 160)}
}

local buttons = {}
for i, data in ipairs(buttonData) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.3, -10, 0, 35)
    btn.Position = data[2]
    btn.BackgroundColor3 = Color3.fromRGB(220, 220, 250)
    btn.Text = data[1]
    btn.TextSize = 12
    btn.Font = Enum.Font.Gotham
    btn.Parent = homeContent
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = btn
    
    buttons[data[1]] = btn
end

-- SCRIPT TAB CONTENT
local scriptContent = Instance.new("Frame")
scriptContent.Size = UDim2.new(1, -10, 1, -10)
scriptContent.Position = UDim2.new(0, 5, 0, 5)
scriptContent.BackgroundTransparency = 1
scriptContent.Visible = false
scriptContent.Parent = contentArea

-- Search Box
local searchBox = Instance.new("TextBox")
searchBox.Size = UDim2.new(1, -10, 0, 30)
searchBox.Position = UDim2.new(0, 5, 0, 5)
searchBox.BackgroundColor3 = Color3.new(1, 1, 1)
searchBox.PlaceholderText = "üîç T√¨m ki·∫øm script..."
searchBox.Text = ""
searchBox.TextSize = 14
searchBox.Parent = scriptContent

local searchCorner = Instance.new("UICorner")
searchCorner.CornerRadius = UDim.new(0, 8)
searchCorner.Parent = searchBox

-- Script List
local scriptList = Instance.new("ScrollingFrame")
scriptList.Size = UDim2.new(1, -10, 1, -45)
scriptList.Position = UDim2.new(0, 5, 0, 40)
scriptList.BackgroundColor3 = Color3.new(0.98, 0.98, 0.98)
scriptList.ScrollBarThickness = 6
scriptList.CanvasSize = UDim2.new(0, 0, 0, 300)
scriptList.Parent = scriptContent

local listCorner = Instance.new("UICorner")
listCorner.CornerRadius = UDim.new(0, 8)
listCorner.Parent = scriptList

local listLayout = Instance.new("UIListLayout")
listLayout.Padding = UDim.new(0, 5)
listLayout.Parent = scriptList

-- Player Frame
local playerFrame = Instance.new("Frame")
playerFrame.Size = UDim2.new(0, 200, 0, 300)
playerFrame.Position = UDim2.new(0.5, 220, 0.5, -150)
playerFrame.BackgroundColor3 = Color3.fromRGB(255, 240, 245)
playerFrame.Visible = false
playerFrame.Parent = screenGui

local playerCorner = Instance.new("UICorner")
playerCorner.CornerRadius = UDim.new(0, 15)
playerCorner.Parent = playerFrame

local playerTitle = Instance.new("TextLabel")
playerTitle.Size = UDim2.new(1, 0, 0, 30)
playerTitle.BackgroundTransparency = 1
playerTitle.Text = "üë• Players"
playerTitle.TextSize = 16
playerTitle.Font = Enum.Font.GothamBold
playerTitle.Parent = playerFrame

local playerList = Instance.new("ScrollingFrame")
playerList.Size = UDim2.new(1, -10, 1, -35)
playerList.Position = UDim2.new(0, 5, 0, 30)
playerList.BackgroundColor3 = Color3.new(1, 1, 1)
playerList.ScrollBarThickness = 4
playerList.Parent = playerFrame

-- Toggle Button
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 80, 0, 30)
toggleButton.Position = UDim2.new(0, 10, 0, 10)
toggleButton.BackgroundColor3 = Color3.fromRGB(245, 79, 108)
toggleButton.Text = "Mila üíñ"
toggleButton.TextColor3 = Color3.new(1, 1, 1)
toggleButton.TextSize = 12
toggleButton.Visible = false
toggleButton.Parent = screenGui

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 10)
toggleCorner.Parent = toggleButton

-- FUNCTIONS
local function switchTab(tabName)
    currentTab = tabName
    if tabName == "Home" then
        homeTab.BackgroundColor3 = Color3.new(1, 1, 1)
        scriptTab.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        homeContent.Visible = true
        scriptContent.Visible = false
    else
        homeTab.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        scriptTab.BackgroundColor3 = Color3.new(1, 1, 1)
        homeContent.Visible = false
        scriptContent.Visible = true
    end
end

local function toggleNoclip()
    noclip = not noclip
    if noclip then
        local connection = RunService.Stepped:Connect(function()
            if not noclip then connection:Disconnect() return end
            for _, part in pairs(character:GetChildren()) do
                if part:IsA("BasePart") then part.CanCollide = false end
            end
        end)
    end
end

local function toggleInfiniteJump()
    infiniteJump = not infiniteJump
    if infiniteJump then
        jumpConnection = UserInputService.JumpRequest:Connect(function()
            if character:FindFirstChild("Humanoid") then
                character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end)
    elseif jumpConnection then
        jumpConnection:Disconnect()
    end
end

local function toggleGravity()
    noGravity = not noGravity
    if noGravity then
        gravityConnection = RunService.Heartbeat:Connect(function()
            if not noGravity then gravityConnection:Disconnect() return end
            if character:FindFirstChild("HumanoidRootPart") then
                local bodyVelocity = character.HumanoidRootPart:FindFirstChild("AntiGravity")
                if not bodyVelocity then
                    bodyVelocity = Instance.new("BodyVelocity")
                    bodyVelocity.Name = "AntiGravity"
                    bodyVelocity.MaxForce = Vector3.new(0, math.huge, 0)
                    bodyVelocity.Velocity = Vector3.new(0, 0, 0)
                    bodyVelocity.Parent = character.HumanoidRootPart
                end
            end
        end)
    else
        if character:FindFirstChild("HumanoidRootPart") then
            local bodyVel = character.HumanoidRootPart:FindFirstChild("AntiGravity")
            if bodyVel then bodyVel:Destroy() end
        end
    end
end

local function updatePlayerList()
    for _, child in pairs(playerList:GetChildren()) do
        if child:IsA("Frame") then child:Destroy() end
    end
    
    for _, targetPlayer in pairs(Players:GetPlayers()) do
        if targetPlayer ~= player then
            local container = Instance.new("Frame")
            container.Size = UDim2.new(1, 0, 0, 50)
            container.BackgroundColor3 = Color3.fromRGB(245, 245, 255)
            container.Parent = playerList
            
            local name = Instance.new("TextLabel")
            name.Size = UDim2.new(1, 0, 0.5, 0)
            name.BackgroundTransparency = 1
            name.Text = targetPlayer.Name
            name.TextSize = 12
            name.Font = Enum.Font.Gotham
            name.Parent = container
            
            local tpBtn = Instance.new("TextButton")
            tpBtn.Size = UDim2.new(0.45, 0, 0.5, 0)
            tpBtn.Position = UDim2.new(0, 0, 0.5, 0)
            tpBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 255)
            tpBtn.Text = "üìç TP"
            tpBtn.TextSize = 10
            tpBtn.Parent = container
            
            local viewBtn = Instance.new("TextButton")
            viewBtn.Size = UDim2.new(0.45, 0, 0.5, 0)
            viewBtn.Position = UDim2.new(0.55, 0, 0.5, 0)
            viewBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 100)
            viewBtn.Text = "üëÅÔ∏è View"
            viewBtn.TextSize = 10
            viewBtn.Parent = container
            
            tpBtn.MouseButton1Click:Connect(function()
                if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame
                end
            end)
            
            viewBtn.MouseButton1Click:Connect(function()
                if targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
                    workspace.CurrentCamera.CameraSubject = targetPlayer.Character.Humanoid
                end
            end)
        end
    end
end

local scripts = {
    {"üéÆ Infinite Yield", "loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()"},
    {"üîß Dark Dex", "loadstring(game:HttpGet('https://raw.githubusercontent.com/Babyhamsta/RBLX_Scripts/main/Universal/BypassedDarkDexV3.lua'))()"},
    {"‚ö° Speed Hub X", "loadstring(game:HttpGet('https://raw.githubusercontent.com/ahmadsgamer2/Script--Pastebin-and-GDrive-/main/Speed%20Hub%20X'))()"},
    {"üåü Orion Lib", "loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Orion/main/source'))()"}
}

local function createScriptButtons()
    for _, scriptData in ipairs(scripts) do
        local scriptBtn = Instance.new("TextButton")
        scriptBtn.Size = UDim2.new(1, -10, 0, 40)
        scriptBtn.BackgroundColor3 = Color3.fromRGB(230, 230, 250)
        scriptBtn.Text = scriptData[1]
        scriptBtn.TextSize = 14
        scriptBtn.Font = Enum.Font.Gotham
        scriptBtn.Parent = scriptList
        
        local scriptBtnCorner = Instance.new("UICorner")
        scriptBtnCorner.CornerRadius = UDim.new(0, 8)
        scriptBtnCorner.Parent = scriptBtn
        
        scriptBtn.MouseButton1Click:Connect(function()
            loadstring(scriptData[2])()
        end)
    end
    scriptList.CanvasSize = UDim2.new(0, 0, 0, #scripts * 45)
end

-- BUTTON CONNECTIONS
homeTab.MouseButton1Click:Connect(function() switchTab("Home") end)
scriptTab.MouseButton1Click:Connect(function() switchTab("Script") end)

buttons["üèÉ Speed"].MouseButton1Click:Connect(function()
    local speed = tonumber(speedBox.Text) or 16
    humanoid.WalkSpeed = speed
    speedLabel.Text = "Speed: " .. speed
end)

buttons["ü¶ò Jump"].MouseButton1Click:Connect(function()
    local jump = tonumber(jumpBox.Text) or 50
    humanoid.JumpPower = jump
    jumpLabel.Text = "Jump: " .. jump
end)

buttons["üëª Noclip"].MouseButton1Click:Connect(toggleNoclip)
buttons["‚ôæÔ∏è InfJump"].MouseButton1Click:Connect(toggleInfiniteJump)
buttons["üåç NoGrav"].MouseButton1Click:Connect(toggleGravity)

buttons["üïäÔ∏è Fly"].MouseButton1Click:Connect(function()
    pcall(function() loadstring(game:HttpGet("https://raw.githubusercontent.com/Sddnin4/Mila/refs/heads/main/Fly"))() end)
end)

buttons["üìç Players"].MouseButton1Click:Connect(function()
    playerFrame.Visible = not playerFrame.Visible
    if playerFrame.Visible then updatePlayerList() end
end)

buttons["üì∑ ResetCam"].MouseButton1Click:Connect(function()
    workspace.CurrentCamera.CameraSubject = character.Humanoid
end)

buttons["üîÑ Reset"].MouseButton1Click:Connect(function()
    humanoid.WalkSpeed = 16
    humanoid.JumpPower = 50
    noclip, infiniteJump, noGravity = false, false, false
    if jumpConnection then jumpConnection:Disconnect() end
    if gravityConnection then gravityConnection:Disconnect() end
    speedBox.Text, jumpBox.Text = "16", "50"
    speedLabel.Text, jumpLabel.Text = "Speed: 16", "Jump: 50"
    playerFrame.Visible = false
    workspace.CurrentCamera.CameraSubject = character.Humanoid
end)

applySpeed.MouseButton1Click:Connect(function()
    local speed = tonumber(speedBox.Text) or 16
    humanoid.WalkSpeed = speed
    speedLabel.Text = "Speed: " .. speed
end)

applyJump.MouseButton1Click:Connect(function()
    local jump = tonumber(jumpBox.Text) or 50
    humanoid.JumpPower = jump
    jumpLabel.Text = "Jump: " .. jump
end)

closeButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = false
    toggleButton.Visible = true
    playerFrame.Visible = false
end)

toggleButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = true
    toggleButton.Visible = false
end)

-- Search functionality
searchBox:GetPropertyChangedSignal("Text"):Connect(function()
    local query = searchBox.Text:lower()
    for _, child in pairs(scriptList:GetChildren()) do
        if child:IsA("TextButton") then
            if query == "" or child.Text:lower():find(query) then
                child.Visible = true
            else
                child.Visible = false
            end
        end
    end
end)

UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.RightShift then
        if mainFrame.Visible then
            mainFrame.Visible = false
            toggleButton.Visible = true
            playerFrame.Visible = false
        else
            mainFrame.Visible = true
            toggleButton.Visible = false
        end
    end
end)

-- Initialize
createScriptButtons()
player.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = character:WaitForChild("Humanoid")
    noclip, infiniteJump, noGravity = false, false, false
end)

print("Mila UI v2.0 loaded! Press Right Shift to toggle.")