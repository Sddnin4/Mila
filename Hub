-- Mila UI Script for Roblox - New Design
-- T·∫°o b·ªüi: Mila
-- T√≠nh nƒÉng: Speed, Jump, Fly, Noclip, Teleport, InfiniteJump

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Variables
local noclip = false
local infiniteJump = false
local originalWalkSpeed = 16
local originalJumpPower = 50
local jumpConnection

-- Loading Screen
local loadingGui = Instance.new("ScreenGui")
loadingGui.Name = "MilaLoading"
loadingGui.Parent = CoreGui

local loadingFrame = Instance.new("Frame")
loadingFrame.Size = UDim2.new(1, 0, 1, 0)
loadingFrame.BackgroundColor3 = Color3.new(0.15, 0.15, 0.2)
loadingFrame.BorderSizePixel = 0
loadingFrame.Parent = loadingGui

local loadingTitle = Instance.new("TextLabel")
loadingTitle.Size = UDim2.new(0, 200, 0, 50)
loadingTitle.Position = UDim2.new(0.5, -100, 0.5, -50)
loadingTitle.BackgroundTransparency = 1
loadingTitle.Text = "üíñ Mila UI üíñ"
loadingTitle.TextColor3 = Color3.new(1, 1, 1)
loadingTitle.TextSize = 24
loadingTitle.Font = Enum.Font.GothamBold
loadingTitle.Parent = loadingFrame

local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0, 300, 0, 6)
progressBar.Position = UDim2.new(0.5, -150, 0.5, 10)
progressBar.BackgroundColor3 = Color3.new(0.3, 0.3, 0.4)
progressBar.BorderSizePixel = 0
progressBar.Parent = loadingFrame

local progressBarCorner = Instance.new("UICorner")
progressBarCorner.CornerRadius = UDim.new(0, 3)
progressBarCorner.Parent = progressBar

local progressFill = Instance.new("Frame")
progressFill.Size = UDim2.new(0, 0, 1, 0)
progressFill.BackgroundColor3 = Color3.new(1, 0.4, 0.7)
progressFill.BorderSizePixel = 0
progressFill.Parent = progressBar

local progressFillCorner = Instance.new("UICorner")
progressFillCorner.CornerRadius = UDim.new(0, 3)
progressFillCorner.Parent = progressFill

local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(0, 300, 0, 30)
loadingText.Position = UDim2.new(0.5, -150, 0.5, 30)
loadingText.BackgroundTransparency = 1
loadingText.Text = "ƒêang t·∫£i..."
loadingText.TextColor3 = Color3.new(0.8, 0.8, 0.8)
loadingText.TextSize = 14
loadingText.Font = Enum.Font.Gotham
loadingText.Parent = loadingFrame

-- Progress Animation
local function animateLoading()
    local steps = {"ƒêang kh·ªüi t·∫°o...", "ƒêang t·∫£i giao di·ªán...", "ƒêang chu·∫©n b·ªã t√≠nh nƒÉng...", "Ho√†n th√†nh!"}
    for i = 1, 100 do
        wait(0.02)
        progressFill.Size = UDim2.new(i/100, 0, 1, 0)
        if i <= 25 then
            loadingText.Text = steps[1]
        elseif i <= 50 then
            loadingText.Text = steps[2]
        elseif i <= 75 then
            loadingText.Text = steps[3]
        else
            loadingText.Text = steps[4]
        end
    end
    wait(0.5)
    loadingGui:Destroy()
end

-- Start loading animation
spawn(animateLoading)

-- Main UI Creation
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MilaUI"
screenGui.Parent = CoreGui
screenGui.ResetOnSpawn = false

-- Main Frame (Smaller size)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 280, 0, 180)
mainFrame.Position = UDim2.new(0.5, -140, 0.5, -90)
mainFrame.BackgroundColor3 = Color3.new(0.95, 0.95, 0.95)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Visible = false
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainFrame

-- Tab Container
local tabContainer = Instance.new("Frame")
tabContainer.Size = UDim2.new(1, 0, 0, 35)
tabContainer.BackgroundColor3 = Color3.new(1, 0.4, 0.7)
tabContainer.BorderSizePixel = 0
tabContainer.Parent = mainFrame

local tabCorner = Instance.new("UICorner")
tabCorner.CornerRadius = UDim.new(0, 12)
tabCorner.Parent = tabContainer

-- Tab Bottom Frame (to square bottom corners)
local tabBottom = Instance.new("Frame")
tabBottom.Size = UDim2.new(1, 0, 0, 12)
tabBottom.Position = UDim2.new(0, 0, 1, -12)
tabBottom.BackgroundColor3 = Color3.new(1, 0.4, 0.7)
tabBottom.BorderSizePixel = 0
tabBottom.Parent = tabContainer

-- Home Tab
local homeTab = Instance.new("TextButton")
homeTab.Name = "HomeTab"
homeTab.Size = UDim2.new(0, 120, 0, 30)
homeTab.Position = UDim2.new(0, 10, 0, 2.5)
homeTab.BackgroundColor3 = Color3.new(1, 1, 1)
homeTab.Text = "Home"
homeTab.TextColor3 = Color3.new(0.2, 0.2, 0.2)
homeTab.TextSize = 14
homeTab.Font = Enum.Font.GothamBold
homeTab.Parent = tabContainer

local homeTabCorner = Instance.new("UICorner")
homeTabCorner.CornerRadius = UDim.new(0, 8)
homeTabCorner.Parent = homeTab

-- Script Tab
local scriptTab = Instance.new("TextButton")
scriptTab.Name = "ScriptTab"
scriptTab.Size = UDim2.new(0, 120, 0, 30)
scriptTab.Position = UDim2.new(0, 140, 0, 2.5)
scriptTab.BackgroundColor3 = Color3.new(0.8, 0.8, 0.8)
scriptTab.Text = "Script"
scriptTab.TextColor3 = Color3.new(0.4, 0.4, 0.4)
scriptTab.TextSize = 14
scriptTab.Font = Enum.Font.Gotham
scriptTab.Parent = tabContainer

local scriptTabCorner = Instance.new("UICorner")
scriptTabCorner.CornerRadius = UDim.new(0, 8)
scriptTabCorner.Parent = scriptTab

-- Close Button
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 20, 0, 20)
closeButton.Position = UDim2.new(1, -25, 0, 7.5)
closeButton.BackgroundColor3 = Color3.new(1, 0.3, 0.3)
closeButton.Text = "‚úï"
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.TextSize = 12
closeButton.Font = Enum.Font.GothamBold
closeButton.Parent = tabContainer

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(1, 0)
closeCorner.Parent = closeButton

-- Toggle Button (when closed)
local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 60, 0, 25)
toggleButton.Position = UDim2.new(0, 10, 0, 10)
toggleButton.BackgroundColor3 = Color3.new(1, 0.4, 0.7)
toggleButton.Text = "Mila"
toggleButton.TextColor3 = Color3.new(1, 1, 1)
toggleButton.TextSize = 12
toggleButton.Font = Enum.Font.GothamBold
toggleButton.Visible = false
toggleButton.Parent = screenGui

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 8)
toggleCorner.Parent = toggleButton

-- Home Content Frame
local homeContent = Instance.new("ScrollingFrame")
homeContent.Name = "HomeContent"
homeContent.Size = UDim2.new(1, -10, 1, -45)
homeContent.Position = UDim2.new(0, 5, 0, 40)
homeContent.BackgroundTransparency = 1
homeContent.ScrollBarThickness = 4
homeContent.CanvasSize = UDim2.new(0, 0, 0, 300)
homeContent.Parent = mainFrame

-- Script Content Frame
local scriptContent = Instance.new("ScrollingFrame")
scriptContent.Name = "ScriptContent"
scriptContent.Size = UDim2.new(1, -10, 1, -45)
scriptContent.Position = UDim2.new(0, 5, 0, 40)
scriptContent.BackgroundTransparency = 1
scriptContent.ScrollBarThickness = 4
scriptContent.CanvasSize = UDim2.new(0, 0, 0, 200)
scriptContent.Visible = false
scriptContent.Parent = mainFrame

-- Player Frame (Smaller)
local playerFrame = Instance.new("Frame")
playerFrame.Name = "PlayerFrame"
playerFrame.Size = UDim2.new(0, 160, 0, 180)
playerFrame.Position = UDim2.new(0.5, 145, 0.5, -90)
playerFrame.BackgroundColor3 = Color3.new(0.95, 0.95, 0.95)
playerFrame.BorderSizePixel = 0
playerFrame.Visible = false
playerFrame.Parent = screenGui

local playerFrameCorner = Instance.new("UICorner")
playerFrameCorner.CornerRadius = UDim.new(0, 12)
playerFrameCorner.Parent = playerFrame

-- Player Frame Header
local playerHeader = Instance.new("Frame")
playerHeader.Size = UDim2.new(1, 0, 0, 30)
playerHeader.BackgroundColor3 = Color3.new(1, 0.4, 0.7)
playerHeader.BorderSizePixel = 0
playerHeader.Parent = playerFrame

local playerHeaderCorner = Instance.new("UICorner")
playerHeaderCorner.CornerRadius = UDim.new(0, 12)
playerHeaderCorner.Parent = playerHeader

local playerHeaderBottom = Instance.new("Frame")
playerHeaderBottom.Size = UDim2.new(1, 0, 0, 12)
playerHeaderBottom.Position = UDim2.new(0, 0, 1, -12)
playerHeaderBottom.BackgroundColor3 = Color3.new(1, 0.4, 0.7)
playerHeaderBottom.BorderSizePixel = 0
playerHeaderBottom.Parent = playerHeader

local playerTitle = Instance.new("TextLabel")
playerTitle.Size = UDim2.new(1, 0, 1, 0)
playerTitle.BackgroundTransparency = 1
playerTitle.Text = "üë• Players"
playerTitle.TextColor3 = Color3.new(1, 1, 1)
playerTitle.TextSize = 14
playerTitle.Font = Enum.Font.GothamBold
playerTitle.Parent = playerHeader

local playerList = Instance.new("ScrollingFrame")
playerList.Name = "PlayerList"
playerList.Size = UDim2.new(1, -10, 1, -40)
playerList.Position = UDim2.new(0, 5, 0, 35)
playerList.BackgroundColor3 = Color3.new(1, 1, 1)
playerList.ScrollBarThickness = 3
playerList.Parent = playerFrame

local listCorner = Instance.new("UICorner")
listCorner.CornerRadius = UDim.new(0, 8)
listCorner.Parent = playerList

local listLayout = Instance.new("UIListLayout")
listLayout.Padding = UDim.new(0, 2)
listLayout.Parent = playerList

-- Button Creation Function
local function createButton(parent, name, text, position, size, callback)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = size or UDim2.new(0, 120, 0, 25)
    button.Position = position
    button.BackgroundColor3 = Color3.new(1, 0.4, 0.7)
    button.Text = text
    button.TextColor3 = Color3.new(1, 1, 1)
    button.TextSize = 11
    button.Font = Enum.Font.Gotham
    button.Parent = parent
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    button.MouseButton1Click:Connect(callback)
    
    -- Hover effect
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = Color3.new(1, 0.5, 0.8)
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = Color3.new(1, 0.4, 0.7)
    end)
    
    return button
end

-- Input Creation Function
local function createInput(parent, name, placeholder, position, size)
    local input = Instance.new("TextBox")
    input.Name = name
    input.Size = size or UDim2.new(0, 60, 0, 20)
    input.Position = position
    input.BackgroundColor3 = Color3.new(1, 1, 1)
    input.Text = ""
    input.PlaceholderText = placeholder
    input.TextColor3 = Color3.new(0.2, 0.2, 0.2)
    input.TextSize = 10
    input.Font = Enum.Font.Gotham
    input.Parent = parent
    
    local inputCorner = Instance.new("UICorner")
    inputCorner.CornerRadius = UDim.new(0, 4)
    inputCorner.Parent = input
    
    return input
end

-- Label Creation Function
local function createLabel(parent, text, position, size)
    local label = Instance.new("TextLabel")
    label.Size = size or UDim2.new(0, 120, 0, 15)
    label.Position = position
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.new(0.3, 0.3, 0.3)
    label.TextSize = 10
    label.Font = Enum.Font.Gotham
    label.Parent = parent
    
    return label
end

-- HOME TAB CONTENT
-- Speed Controls
local speedLabel = createLabel(homeContent, "Speed:", UDim2.new(0, 10, 0, 10))
local speedInput = createInput(homeContent, "SpeedInput", "16", UDim2.new(0, 60, 0, 10), UDim2.new(0, 50, 0, 20))
createButton(homeContent, "SpeedBtn", "Apply", UDim2.new(0, 120, 0, 10), UDim2.new(0, 50, 0, 20), function()
    local speed = tonumber(speedInput.Text) or 16
    humanoid.WalkSpeed = speed
end)

-- Jump Controls
local jumpLabel = createLabel(homeContent, "Jump:", UDim2.new(0, 10, 0, 40))
local jumpInput = createInput(homeContent, "JumpInput", "50", UDim2.new(0, 60, 0, 40), UDim2.new(0, 50, 0, 20))
createButton(homeContent, "JumpBtn", "Apply", UDim2.new(0, 120, 0, 40), UDim2.new(0, 50, 0, 20), function()
    local jump = tonumber(jumpInput.Text) or 50
    humanoid.JumpPower = jump
end)

-- Main Buttons
createButton(homeContent, "NoclipBtn", "üëª Noclip", UDim2.new(0, 10, 0, 70), UDim2.new(0, 75, 0, 25), function()
    noclip = not noclip
    if noclip then
        local connection
        connection = RunService.Stepped:Connect(function()
            if not noclip then
                connection:Disconnect()
                return
            end
            for _, part in pairs(character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
    else
        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                part.CanCollide = true
            end
        end
    end
end)

createButton(homeContent, "InfJumpBtn", "‚ôæÔ∏è Inf Jump", UDim2.new(0, 95, 0, 70), UDim2.new(0, 75, 0, 25), function()
    infiniteJump = not infiniteJump
    if infiniteJump then
        jumpConnection = UserInputService.JumpRequest:Connect(function()
            if character and character:FindFirstChild("Humanoid") then
                character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end)
    else
        if jumpConnection then
            jumpConnection:Disconnect()
            jumpConnection = nil
        end
    end
end)

createButton(homeContent, "FlyBtn", "üïäÔ∏è Fly", UDim2.new(0, 10, 0, 105), UDim2.new(0, 75, 0, 25), function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/GhostPlayer352/Test4/main/Vehicle%20Fly%20Gui"))()
    end)
end)

createButton(homeContent, "PlayersBtn", "üë• Players", UDim2.new(0, 95, 0, 105), UDim2.new(0, 75, 0, 25), function()
    playerFrame.Visible = not playerFrame.Visible
    if playerFrame.Visible then
        updatePlayerList()
    end
end)

createButton(homeContent, "ResetCamBtn", "üì∑ Reset Cam", UDim2.new(0, 10, 0, 140), UDim2.new(0, 75, 0, 25), function()
    workspace.CurrentCamera.CameraSubject = character.Humanoid
end)

createButton(homeContent, "ResetBtn", "üîÑ Reset All", UDim2.new(0, 95, 0, 140), UDim2.new(0, 75, 0, 25), function()
    humanoid.WalkSpeed = originalWalkSpeed
    humanoid.JumpPower = originalJumpPower
    noclip = false
    infiniteJump = false
    if jumpConnection then
        jumpConnection:Disconnect()
        jumpConnection = nil
    end
    speedInput.Text = ""
    jumpInput.Text = ""
    playerFrame.Visible = false
    workspace.CurrentCamera.CameraSubject = character.Humanoid
    
    for _, part in pairs(character:GetChildren()) do
        if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
            part.CanCollide = true
        end
    end
end)

-- SCRIPT TAB CONTENT
createLabel(scriptContent, "Script Hub Coming Soon...", UDim2.new(0, 10, 0, 10), UDim2.new(0, 200, 0, 20))
createLabel(scriptContent, "C√°c script s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y", UDim2.new(0, 10, 0, 40), UDim2.new(0, 200, 0, 20))

-- Player List Functions
function updatePlayerList()
    for _, child in pairs(playerList:GetChildren()) do
        if child:IsA("Frame") then
            child:Destroy()
        end
    end
    
    for _, targetPlayer in pairs(Players:GetPlayers()) do
        if targetPlayer ~= player then
            local playerContainer = Instance.new("Frame")
            playerContainer.Size = UDim2.new(1, 0, 0, 45)
            playerContainer.BackgroundColor3 = Color3.new(0.98, 0.98, 0.98)
            playerContainer.Parent = playerList
            
            local containerCorner = Instance.new("UICorner")
            containerCorner.CornerRadius = UDim.new(0, 4)
            containerCorner.Parent = playerContainer
            
            local playerName = Instance.new("TextLabel")
            playerName.Size = UDim2.new(1, 0, 0, 15)
            playerName.Position = UDim2.new(0, 5, 0, 2)
            playerName.BackgroundTransparency = 1
            playerName.Text = targetPlayer.Name
            playerName.TextSize = 10
            playerName.Font = Enum.Font.GothamBold
            playerName.TextColor3 = Color3.new(0.2, 0.2, 0.2)
            playerName.TextXAlignment = Enum.TextXAlignment.Left
            playerName.Parent = playerContainer
            
            local teleportBtn = Instance.new("TextButton")
            teleportBtn.Size = UDim2.new(0, 65, 0, 20)
            teleportBtn.Position = UDim2.new(0, 5, 0, 20)
            teleportBtn.BackgroundColor3 = Color3.new(0.3, 0.7, 1)
            teleportBtn.Text = "üìç Teleport"
            teleportBtn.TextSize = 8
            teleportBtn.Font = Enum.Font.Gotham
            teleportBtn.TextColor3 = Color3.new(1, 1, 1)
            teleportBtn.Parent = playerContainer
            
            local tpCorner = Instance.new("UICorner")
            tpCorner.CornerRadius = UDim.new(0, 4)
            tpCorner.Parent = teleportBtn
            
            local viewBtn = Instance.new("TextButton")
            viewBtn.Size = UDim2.new(0, 65, 0, 20)
            viewBtn.Position = UDim2.new(0, 80, 0, 20)
            viewBtn.BackgroundColor3 = Color3.new(1, 0.6, 0.2)
            viewBtn.Text = "üëÅÔ∏è View"
            viewBtn.TextSize = 8
            viewBtn.Font = Enum.Font.Gotham
            viewBtn.TextColor3 = Color3.new(1, 1, 1)
            viewBtn.Parent = playerContainer
            
            local viewCorner = Instance.new("UICorner")
            viewCorner.CornerRadius = UDim.new(0, 4)
            viewCorner.Parent = viewBtn
            
            teleportBtn.MouseButton1Click:Connect(function()
                if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame
                end
            end)
            
            viewBtn.MouseButton1Click:Connect(function()
                if targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
                    workspace.CurrentCamera.CameraSubject = targetPlayer.Character.Humanoid
                end
            end)
        end
    end
    
    playerList.CanvasSize = UDim2.new(0, 0, 0, #Players:GetPlayers() * 47)
end

-- Tab Switching
local function switchTab(tabName)
    if tabName == "Home" then
        homeContent.Visible = true
        scriptContent.Visible = false
        homeTab.BackgroundColor3 = Color3.new(1, 1, 1)
        homeTab.TextColor3 = Color3.new(0.2, 0.2, 0.2)
        scriptTab.BackgroundColor3 = Color3.new(0.8, 0.8, 0.8)
        scriptTab.TextColor3 = Color3.new(0.4, 0.4, 0.4)
    else
        homeContent.Visible = false
        scriptContent.Visible = true
        homeTab.BackgroundColor3 = Color3.new(0.8, 0.8, 0.8)
        homeTab.TextColor3 = Color3.new(0.4, 0.4, 0.4)
        scriptTab.BackgroundColor3 = Color3.new(1, 1, 1)
        scriptTab.TextColor3 = Color3.new(0.2, 0.2, 0.2)
    end
end

homeTab.MouseButton1Click:Connect(function()
    switchTab("Home")
end)

scriptTab.MouseButton1Click:Connect(function()
    switchTab("Script")
end)

-- Close/Toggle functionality
closeButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = false
    toggleButton.Visible = true
    playerFrame.Visible = false
end)

toggleButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = true
    toggleButton.Visible = false
end)

-- Keyboard shortcut (Right Shift)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.RightShift then
        if mainFrame.Visible then
            mainFrame.Visible = false
            toggleButton.Visible = true
            playerFrame.Visible = false
        else
            mainFrame.Visible = true
            toggleButton.Visible = false
        end
    end
end)

-- Character respawn handling
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    humanoid = character:WaitForChild("Humanoid")
    noclip = false
    infiniteJump = false
    if jumpConnection then
        jumpConnection:Disconnect()
        jumpConnection = nil
    end
    wait(1)
    humanoid.WalkSpeed = originalWalkSpeed
    humanoid.JumpPower = originalJumpPower
end)

-- Show UI after loading
wait(2.5)
mainFrame.Visible = true

print("Mila UI ƒë√£ ƒë∆∞·ª£c t·∫£i th√†nh c√¥ng! üíñ")
print("Nh·∫•n Right Shift ƒë·ªÉ b·∫≠t/t·∫Øt UI")