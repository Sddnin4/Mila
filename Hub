-- Mila UI Script for Roblox
-- Tạo bởi: Mila
-- Tính năng: Speed, Jump, Fly, Noclip, Teleport, Invisible

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Variables
local flying = false
local noclip = false
local invisible = false
local originalWalkSpeed = 16
local originalJumpPower = 50

-- UI Creation
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MilaUI"
screenGui.Parent = CoreGui
screenGui.ResetOnSpawn = false

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 300, 0, 200)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
mainFrame.BackgroundColor3 = Color3.new(1, 0.8, 0.9) -- Light pink
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Round corners
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 15)
corner.Parent = mainFrame

-- Gradient
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.new(1, 0.7, 0.9)),
    ColorSequenceKeypoint.new(1, Color3.new(0.9, 0.8, 1))
}
gradient.Rotation = 45
gradient.Parent = mainFrame

-- Title
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "💖 Mila UI 💖"
title.TextColor3 = Color3.new(0.5, 0, 0.5)
title.TextSize = 18
title.Font = Enum.Font.GothamBold
title.Parent = mainFrame

-- Close Button
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 25, 0, 25)
closeButton.Position = UDim2.new(1, -30, 0, 5)
closeButton.BackgroundColor3 = Color3.new(1, 0.5, 0.5)
closeButton.Text = "✕"
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.TextSize = 14
closeButton.Font = Enum.Font.GothamBold
closeButton.Parent = mainFrame

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 12)
closeCorner.Parent = closeButton

-- Toggle Button (when closed)
local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 80, 0, 30)
toggleButton.Position = UDim2.new(0, 10, 0, 10)
toggleButton.BackgroundColor3 = Color3.new(1, 0.8, 0.9)
toggleButton.Text = "Mila 💖"
toggleButton.TextColor3 = Color3.new(0.5, 0, 0.5)
toggleButton.TextSize = 12
toggleButton.Font = Enum.Font.Gotham
toggleButton.Visible = false
toggleButton.Parent = screenGui

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 10)
toggleCorner.Parent = toggleButton

-- Content Frame
local contentFrame = Instance.new("ScrollingFrame")
contentFrame.Name = "ContentFrame"
contentFrame.Size = UDim2.new(1, -20, 1, -40)
contentFrame.Position = UDim2.new(0, 10, 0, 35)
contentFrame.BackgroundTransparency = 1
contentFrame.ScrollBarThickness = 6
contentFrame.CanvasSize = UDim2.new(0, 0, 0, 300)
contentFrame.Parent = mainFrame

-- Button Creation Function
local function createButton(name, text, position, callback)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = UDim2.new(0, 120, 0, 30)
    button.Position = position
    button.BackgroundColor3 = Color3.new(0.9, 0.7, 0.9)
    button.Text = text
    button.TextColor3 = Color3.new(0.3, 0, 0.3)
    button.TextSize = 12
    button.Font = Enum.Font.Gotham
    button.Parent = contentFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = button
    
    button.MouseButton1Click:Connect(callback)
    
    -- Hover effect
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = Color3.new(1, 0.8, 1)
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = Color3.new(0.9, 0.7, 0.9)
    end)
    
    return button
end

-- Speed Slider
local speedLabel = Instance.new("TextLabel")
speedLabel.Size = UDim2.new(1, 0, 0, 20)
speedLabel.Position = UDim2.new(0, 0, 0, 160)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "Speed: 16"
speedLabel.TextColor3 = Color3.new(0.3, 0, 0.3)
speedLabel.TextSize = 12
speedLabel.Font = Enum.Font.Gotham
speedLabel.Parent = contentFrame

local speedSlider = Instance.new("TextBox")
speedSlider.Size = UDim2.new(0, 100, 0, 25)
speedSlider.Position = UDim2.new(0, 10, 0, 180)
speedSlider.BackgroundColor3 = Color3.new(1, 1, 1)
speedSlider.Text = "16"
speedSlider.TextColor3 = Color3.new(0, 0, 0)
speedSlider.TextSize = 12
speedSlider.Parent = contentFrame

local sliderCorner = Instance.new("UICorner")
sliderCorner.CornerRadius = UDim.new(0, 5)
sliderCorner.Parent = speedSlider

-- Jump Height Slider
local jumpLabel = Instance.new("TextLabel")
jumpLabel.Size = UDim2.new(1, 0, 0, 20)
jumpLabel.Position = UDim2.new(0, 0, 0, 210)
jumpLabel.BackgroundTransparency = 1
jumpLabel.Text = "Jump: 50"
jumpLabel.TextColor3 = Color3.new(0.3, 0, 0.3)
jumpLabel.TextSize = 12
jumpLabel.Font = Enum.Font.Gotham
jumpLabel.Parent = contentFrame

local jumpSlider = Instance.new("TextBox")
jumpSlider.Size = UDim2.new(0, 100, 0, 25)
jumpSlider.Position = UDim2.new(0, 10, 0, 230)
jumpSlider.BackgroundColor3 = Color3.new(1, 1, 1)
jumpSlider.Text = "50"
jumpSlider.TextColor3 = Color3.new(0, 0, 0)
jumpSlider.TextSize = 12
jumpSlider.Parent = contentFrame

local jumpCorner = Instance.new("UICorner")
jumpCorner.CornerRadius = UDim.new(0, 5)
jumpCorner.Parent = jumpSlider

-- Player List for Teleport
local playerList = Instance.new("ScrollingFrame")
playerList.Name = "PlayerList"
playerList.Size = UDim2.new(0, 120, 0, 80)
playerList.Position = UDim2.new(0, 150, 0, 80)
playerList.BackgroundColor3 = Color3.new(1, 1, 1)
playerList.ScrollBarThickness = 4
playerList.Visible = false
playerList.Parent = contentFrame

local listCorner = Instance.new("UICorner")
listCorner.CornerRadius = UDim.new(0, 8)
listCorner.Parent = playerList

local listLayout = Instance.new("UIListLayout")
listLayout.Parent = playerList

-- Functions
local function updatePlayerList()
    for _, child in pairs(playerList:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end
    
    for _, targetPlayer in pairs(Players:GetPlayers()) do
        if targetPlayer ~= player then
            local playerButton = Instance.new("TextButton")
            playerButton.Size = UDim2.new(1, 0, 0, 25)
            playerButton.BackgroundColor3 = Color3.new(0.9, 0.9, 0.9)
            playerButton.Text = targetPlayer.Name
            playerButton.TextSize = 10
            playerButton.Parent = playerList
            
            playerButton.MouseButton1Click:Connect(function()
                if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame
                end
                playerList.Visible = false
            end)
        end
    end
    
    playerList.CanvasSize = UDim2.new(0, 0, 0, #Players:GetPlayers() * 25)
end

local function toggleFly()
    flying = not flying
    if flying then
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.MaxForce = Vector3.new(4000, 4000, 4000)
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        bodyVelocity.Parent = character.HumanoidRootPart
        
        local connection
        connection = RunService.Heartbeat:Connect(function()
            if not flying then
                bodyVelocity:Destroy()
                connection:Disconnect()
                return
            end
            
            local moveDirection = humanoid.MoveDirection
            local camera = workspace.CurrentCamera
            local cameraCFrame = camera.CFrame
            
            local velocity = Vector3.new(0, 0, 0)
            
            if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                velocity = velocity + cameraCFrame.LookVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                velocity = velocity - cameraCFrame.LookVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                velocity = velocity - cameraCFrame.RightVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                velocity = velocity + cameraCFrame.RightVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                velocity = velocity + Vector3.new(0, 1, 0)
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
                velocity = velocity - Vector3.new(0, 1, 0)
            end
            
            bodyVelocity.Velocity = velocity * 50
        end)
    end
end

local function toggleNoclip()
    noclip = not noclip
    if noclip then
        local connection
        connection = RunService.Stepped:Connect(function()
            if not noclip then
                connection:Disconnect()
                return
            end
            for _, part in pairs(character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
    else
        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                part.CanCollide = true
            end
        end
    end
end

local function toggleInvisible()
    invisible = not invisible
    for _, part in pairs(character:GetChildren()) do
        if part:IsA("BasePart") then
            part.Transparency = invisible and 1 or 0
        elseif part:IsA("Accessory") then
            part.Handle.Transparency = invisible and 1 or 0
        end
    end
    if character:FindFirstChild("Head") then
        character.Head.face.Transparency = invisible and 1 or 0
    end
end

-- Create Buttons
createButton("SpeedButton", "🏃 Chạy Nhanh", UDim2.new(0, 10, 0, 10), function()
    local speed = tonumber(speedSlider.Text) or 16
    humanoid.WalkSpeed = speed
    speedLabel.Text = "Speed: " .. speed
end)

createButton("JumpButton", "🦘 Nhảy Cao", UDim2.new(0, 150, 0, 10), function()
    local jump = tonumber(jumpSlider.Text) or 50
    humanoid.JumpPower = jump
    jumpLabel.Text = "Jump: " .. jump
end)

createButton("FlyButton", "🕊️ Bay", UDim2.new(0, 10, 0, 50), function()
    toggleFly()
end)

createButton("NoclipButton", "👻 Xuyên Tường", UDim2.new(0, 150, 0, 50), function()
    toggleNoclip()
end)

createButton("TeleportButton", "📍 Dịch Chuyển", UDim2.new(0, 10, 0, 90), function()
    playerList.Visible = not playerList.Visible
    if playerList.Visible then
        updatePlayerList()
    end
end)

createButton("InvisibleButton", "👤 Tàng Hình", UDim2.new(0, 150, 0, 90), function()
    toggleInvisible()
end)

createButton("ResetButton", "🔄 Reset", UDim2.new(0, 10, 0, 130), function()
    humanoid.WalkSpeed = originalWalkSpeed
    humanoid.JumpPower = originalJumpPower
    flying = false
    noclip = false
    invisible = false
    speedSlider.Text = "16"
    jumpSlider.Text = "50"
    speedLabel.Text = "Speed: 16"
    jumpLabel.Text = "Jump: 50"
    
    for _, part in pairs(character:GetChildren()) do
        if part:IsA("BasePart") then
            part.Transparency = 0
            if part.Name ~= "HumanoidRootPart" then
                part.CanCollide = true
            end
        elseif part:IsA("Accessory") then
            part.Handle.Transparency = 0
        end
    end
    if character:FindFirstChild("Head") then
        character.Head.face.Transparency = 0
    end
end)

-- Close/Toggle functionality
closeButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = false
    toggleButton.Visible = true
end)

toggleButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = true
    toggleButton.Visible = false
end)

-- Keyboard shortcut to toggle UI (Right Shift)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.RightShift then
        if mainFrame.Visible then
            mainFrame.Visible = false
            toggleButton.Visible = true
        else
            mainFrame.Visible = true
            toggleButton.Visible = false
        end
    end
end)

-- Character respawn handling
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    humanoid = character:WaitForChild("Humanoid")
    flying = false
    noclip = false
    invisible = false
    wait(1)
    humanoid.WalkSpeed = originalWalkSpeed
    humanoid.JumpPower = originalJumpPower
end)

print("Mila UI đã được tải thành công! 💖")
print("Nhấn Right Shift để bật/tắt UI")